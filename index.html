<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <title>Y2K x ROAST | Dual Chain Chaos</title>
  <meta name="description" content="The Y2K x ROAST fusion hub. Explore NFTs, burn mechanics, and trading portals across Cronos and Solana."/>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rubik:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body class="bg-black text-white">

<div id="toast" class="fixed top-20 left-1/2 transform -translate-x-1/2 z-50 hidden bg-gray-900 text-white px-6 py-3 rounded-lg shadow-lg border border-pink-500">
  <span id="toastMessage"></span>
</div>

<header class="w-full p-4 bg-[#111] flex justify-between items-center fixed top-0 z-50">
  <h1 class="text-2xl glitch font-bold">Y2K x $ROAST</h1>
  <nav class="space-x-4 text-sm">
    <a href="#nfts" class="hover:text-[#ff00ff]">Mint</a>
    <a href="#dex" class="hover:text-[#ff00ff]">Trade</a>
    <a href="#connect" class="hover:text-[#ff00ff]">Connect</a>
    <a href="#submit-roast" class="hover:text-[#ff00ff]">Submit</a>
    <a href="#roasted" class="hover:text-[#ff00ff]">ROASTED</a>
  </nav>
</header>

<section class="text-center py-24 px-4 bg-gradient-to-b from-[#1a1a1a] to-black mt-14">
  <h2 class="text-4xl glitch font-bold mb-4">Dual Chain. No Mercy.</h2>
  <p class="text-lg mx-auto text-gray-400">From CRO to SOL, we roast devs, reward the fearless, and burn it all to the ground.</p>
  <div class="mt-8 flex flex-col gap-4">
    <a href="#nfts" class="px-6 py-3 neon-border">View NFTs</a>
    <a href="#dex" class="px-6 py-3 neon-border">Trade Now</a>
  </div>
</section>

<section id="nfts" class="bg-[#111] py-12 px-4">
  <h3 class="text-3xl glitch font-bold text-center mb-8">Live Music NFT Drops</h3>
  <div class="overflow-x-auto whitespace-nowrap space-x-4 flex px-2 pb-4 snap-x snap-mandatory">
    <div class="inline-block w-48 h-48 flex-shrink-0 snap-center">
      <a href="https://eric-mode-business-boomin.nfts2.me/" target="_blank">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5510.jpeg"
             alt="Eric Mode" class="w-48 h-48 rounded neon-border object-cover" loading="lazy"/>
      </a>
    </div>
    <div class="inline-block w-48 h-48 flex-shrink-0 snap-center">
      <a href="https://cronoshadow.nfts2.me/" target="_blank">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5403.jpeg"
             alt="Cards of Cronos" class="w-48 h-48 rounded neon-border object-cover" loading="lazy"/>
      </a>
    </div>
    <div class="inline-block w-48 h-48 flex-shrink-0 snap-center">
      <a href="https://creative-diamondhands-final-strike-mode.nfts2.me/" target="_blank">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5299.jpeg"
             alt="DiamondHands" class="w-48 h-48 rounded neon-border object-cover" loading="lazy"/>
      </a>
    </div>
    <div class="inline-block w-48 h-48 flex-shrink-0 snap-center">
      <a href="https://dojo-warriors-anthem.nfts2.me/" target="_blank">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5285.jpeg"
             alt="Dojo Warriors" class="w-48 h-48 rounded neon-border object-cover" loading="lazy"/>
      </a>
    </div>
  </div>
</section>

<section id="submit-roast" class="py-16 px-6 bg-black text-center">
  <h3 class="text-4xl glitch font-bold mb-4">Submit a Roast Target</h3>
  <p class="text-gray-400 max-w-xl mx-auto mb-4">
    Submit a name from ùïè. Pay with CRO. The top roast wins the prize pot.
  </p>

  <div class="text-lg text-pink-400 font-bold mb-6">
    This Week's Pool: <span id="poolCRO">0 CRO</span> + <span id="poolSOL">0 SOL</span>
  </div>

  <div id="walletStatus" class="mb-4 text-sm">
    <span class="px-3 py-1 rounded-full bg-gray-800">Wallet: Not Connected</span>
  </div>

  <form id="roastForm" class="max-w-md mx-auto space-y-4">
    <input type="text" id="targetName" name="target" placeholder="@name or project from ùïè"
           class="w-full p-3 rounded bg-[#1a1a1a] text-white neon-border"/>
    <button type="button" id="submitBtn" onclick="submitWithCRO()"
            class="w-full bg-[#ff00ff] text-black font-bold py-2 rounded hover:bg-pink-600">
      Submit with CRO
    </button>
  </form>

  <div id="roastResult" class="mt-4 text-green-400 text-sm"></div>
  <div id="shareRoast" class="mt-4"></div>
</section>

<section id="roasted" class="py-16 px-6 bg-[#111] text-center">
  <h3 class="text-4xl glitch font-bold mb-8">ROASTED</h3>
  <p class="text-gray-400 max-w-xl mx-auto mb-6">
    These names got scorched this week. Fire them up or drop your own below.
  </p>
  <div id="roastList" class="grid gap-4 max-w-2xl mx-auto text-left text-sm text-gray-200"></div>
</section>

<section id="dex" class="bg-[#111] py-12 px-4 text-center">
  <h3 class="text-3xl glitch font-bold mb-4">Trade with Fire</h3>
  <div class="flex flex-col gap-4 mt-6">
    <a href="https://dexscreener.com/cronos/0xDdF11258F392080BC16cF26aA1C58A19c50b9641" target="_blank" class="px-6 py-3 glow">Trade $Y2K (Cronos)</a>
    <a href="https://raydium.io/launchpad/token/?mint=A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray" target="_blank" class="px-6 py-3 glow">Trade $ROAST (Solana)</a>
  </div>
</section>

<section id="connect" class="py-12 px-4 text-center">
  <h3 class="text-3xl glitch font-bold mb-4">Stay Plugged In</h3>
  <p class="text-gray-400 mb-6">Join the fam. Talk your shit. Earn your spot.</p>
  <div class="flex justify-center gap-4">
    <a href="https://discord.gg/XxtpYNXX4a" target="_blank" class="neon-border px-4 py-2">Discord</a>
    <a href="https://x.com/y2kc0in?s=21" target="_blank" class="neon-border px-4 py-2">ùïè (Twitter)</a>
  </div>
</section>

<footer class="bg-black text-center text-sm py-8 px-4 text-gray-600">
  Y2KCoin & $ROAST ‚Äî Contract Addresses:<br/>
  <span class="break-all">Cronos: 0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d</span><br/>
  <span class="break-all">Solana: A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray</span>
</footer>

<style>
  html { background-color: #0a0a0a; }
  body {
    background-color: #0a0a0a;
    font-family: 'Rubik', sans-serif;
    color: #e2e8f0;
    overflow-x: hidden;
  }
  .glitch {
    text-shadow: 2px 0 red, -2px 0 cyan;
    font-family: 'Orbitron', sans-serif;
  }
  .neon-border {
    border: 2px solid #ff00ff;
    box-shadow: 0 0 10px #ff00ff;
    transition: all 0.3s ease;
  }
  .neon-border:active {
    transform: scale(0.95);
    box-shadow: 0 0 5px #ff00ff;
  }
  .glow {
    box-shadow: 0 0 20px #ff0077;
    transition: all 0.3s ease;
  }
  .glow:active {
    transform: scale(0.95);
    box-shadow: 0 0 10px #ff0077;
  }
  #nfts img {
    width: 192px;
    height: 192px;
    object-fit: cover;
    display: block;
  }
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  #toast.show {
    display: block;
    animation: fadeIn 0.3s ease-out;
  }
</style>

<script>
// Toast notification system
function showToast(message, duration = 3000) {
  const toast = document.getElementById('toast');
  const toastMessage = document.getElementById('toastMessage');
  toastMessage.textContent = message;
  toast.classList.add('show');
  toast.classList.remove('hidden');
  
  setTimeout(() => {
    toast.classList.remove('show');
    toast.classList.add('hidden');
  }, duration);
}

// Update wallet status display
async function updateWalletStatus() {
  const walletStatus = document.getElementById('walletStatus');
  
  if (typeof window.ethereum === "undefined") {
    walletStatus.innerHTML = '<span class="px-3 py-1 rounded-full bg-red-900">No Wallet Detected</span>';
    return false;
  }

  try {
    const accounts = await window.ethereum.request({ method: 'eth_accounts' });
    if (accounts.length > 0) {
      const shortenedAccount = accounts[0].slice(0, 6) + '...' + accounts[0].slice(-4);
      walletStatus.innerHTML = `<span class="px-3 py-1 rounded-full bg-green-900">Connected: ${shortenedAccount}</span>`;
      return true;
    } else {
      walletStatus.innerHTML = '<span class="px-3 py-1 rounded-full bg-yellow-900">Wallet Not Connected</span>';
      return false;
    }
  } catch (err) {
    console.error('Error checking wallet:', err);
    walletStatus.innerHTML = '<span class="px-3 py-1 rounded-full bg-red-900">Connection Error</span>';
    return false;
  }
}

// Switch to Cronos network
async function switchToCronosChain() {
  try {
    await window.ethereum.request({
      method: 'wallet_switchEthereumChain',
      params: [{ chainId: '0x19' }],
    });
    return true;
  } catch (switchError) {
    // This error code indicates that the chain has not been added to MetaMask
    if (switchError.code === 4902) {
      try {
        await window.ethereum.request({
          method: 'wallet_addEthereumChain',
          params: [{
            chainId: '0x19',
            chainName: 'Cronos Mainnet',
            nativeCurrency: {
              name: 'CRO',
              symbol: 'CRO',
              decimals: 18
            },
            rpcUrls: ['https://evm.cronos.org'],
            blockExplorerUrls: ['https://cronoscan.com/']
          }]
        });
        return true;
      } catch (addError) {
        showToast('Failed to add Cronos network');
        return false;
      }
    }
    showToast('Failed to switch to Cronos network');
    return false;
  }
}

async function submitWithCRO() {
  const submitBtn = document.getElementById('submitBtn');
  const target = document.getElementById('targetName').value.trim();
  const resultBox = document.getElementById('roastResult');
  const shareBox = document.getElementById('shareRoast');

  // Disable button during processing
  submitBtn.disabled = true;
  const originalBtnText = submitBtn.innerText;
  submitBtn.innerText = 'Processing...';

  try {
    // Input validation
    if (!target || target.length < 3 || !target.startsWith('@')) {
      showToast('Enter a valid ùïè username or project (start with @)');
      return;
    }

    // Check if MetaMask is installed
    if (typeof window.ethereum === 'undefined') {
      showToast('MetaMask not detected. Please install MetaMask.');
      return;
    }

    // Request account access
    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
    if (!accounts || accounts.length === 0) {
      showToast('Please connect your wallet');
      return;
    }

    // Switch to Cronos chain
    if (!await switchToCronosChain()) {
      return;
    }

    // Setup provider and send transaction
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const signer = provider.getSigner();

    showToast('Confirming transaction...');

    const tx = await signer.sendTransaction({
      to: '0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100',
      value: ethers.utils.parseUnits('60', 'ether'),
      gasLimit: 100000
    });

    showToast('Transaction submitted, waiting for confirmation...');

    // Wait for transaction to be mined
    const receipt = await tx.wait();
    
    // Update UI with success
    resultBox.innerHTML = `
      <div class="p-4 bg-green-900/50 rounded-lg mt-4">
        <p>üéØ Roast for "${target}" submitted!</p>
        <a href="https://cronoscan.com/tx/${tx.hash}" target="_blank" 
           class="text-blue-400 hover:underline text-sm">
          View Transaction
        </a>
      </div>
    `;

    // Store in local storage
    const roasts = JSON.parse(localStorage.getItem('roasts')) || [];
    roasts.unshift({ target, chain: 'Cronos', likes: 0, tx: tx.hash });
    localStorage.setItem('roasts', JSON.stringify(roasts));

    // Setup share button
    const tweetText = encodeURIComponent(
      `I just submitted ${target} to be roasted using $Y2KCoin on CRO.\nWeb3 verified. Vote or die.`
    );
    const tweetURL = `https://x.com/intent/tweet?text=${tweetText}&hashtags=Y2KRoast,CROFam`;
    
    shareBox.innerHTML = `
      <a href="${tweetURL}" target="_blank" 
         class="inline-block mt-4 px-4 py-2 bg-[#ff00ff] text-black font-bold rounded hover:bg-pink-600">
        Share on ùïè
      </a>
    `;

    showToast('Roast submitted successfully! üî•');

  } catch (err) {
    console.error('Transaction failed:', err);
    resultBox.innerHTML = `
      <div class="p-4 bg-red-900/50 rounded-lg mt-4">
        <p>‚ùå Transaction failed:</p>
        <p class="text-sm">${err.message || 'Something went wrong. Please try again.'}</p>
      </div>
    `;
    showToast('Transaction failed. Check details below.');
  } finally {
    // Re-enable button
    submitBtn.disabled = false;
    submitBtn.innerText = originalBtnText;
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
  updateWalletStatus();
  
  // Update wallet status when accounts change
  if (window.ethereum) {
    window.ethereum.on('accountsChanged', updateWalletStatus);
    window.ethereum.on('chainChanged', updateWalletStatus);
  }
});
</script>

</body>
</html>
