<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <title>Y2K x ROAST | Dual Chain Chaos</title>
  <meta name="description" content="The Y2K x ROAST fusion hub. Explore NFTs, burn mechanics, and trading portals across Cronos and Solana."/>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rubik:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
</head>
<body class="bg-black text-white">

<!-- Toast Notification -->
<div id="toast" class="fixed top-20 left-1/2 transform -translate-x-1/2 z-50 hidden">
  <div class="bg-gray-900 text-white px-6 py-3 rounded-lg shadow-lg border border-pink-500">
    <span id="toastMessage"></span>
  </div>
</div>

<!-- Solana Wallet Selection Modal -->
<div id="solanaWalletModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
  <div class="bg-[#111] rounded-lg p-6 max-w-md w-full mx-4">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-xl font-bold">Connect Solana Wallet</h3>
      <button onclick="closeSolanaWalletModal()" class="text-gray-500 hover:text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div id="solanaWalletList" class="space-y-2">
      <!-- Wallet buttons will be inserted here -->
    </div>
  </div>
</div>

<!-- Header -->
<header class="w-full p-4 bg-[#111] flex justify-between items-center fixed top-0 z-50">
  <h1 class="text-2xl glitch font-bold">Y2K x $ROAST</h1>
  <nav class="space-x-4 text-sm">
    <a href="#nfts" class="hover:text-[#ff00ff]">Mint</a>
    <a href="#dex" class="hover:text-[#ff00ff]">Trade</a>
    <a href="#connect" class="hover:text-[#ff00ff]">Connect</a>
    <a href="#submit-roast" class="hover:text-[#ff00ff]">Submit</a>
    <a href="#roasted" class="hover:text-[#ff00ff]">ROASTED</a>
  </nav>
</header>

<!-- Hero Section -->
<section class="text-center py-24 px-4 bg-gradient-to-b from-[#1a1a1a] to-black mt-14">
  <h2 class="text-4xl glitch font-bold mb-4">Dual Chain. No Mercy.</h2>
  <p class="text-lg mx-auto text-gray-400">From CRO to SOL, we roast devs, reward the fearless, and burn it all to the ground.</p>
  <div class="mt-8 flex flex-col gap-4">
    <a href="#nfts" class="px-6 py-3 neon-border">View NFTs</a>
    <a href="#dex" class="px-6 py-3 neon-border">Trade Now</a>
  </div>
</section>

<!-- NFTs Section -->
<section id="nfts" class="bg-[#111] py-12 px-4">
  <h3 class="text-3xl glitch font-bold text-center mb-8">Live Music NFT Drops</h3>
  <div class="overflow-x-auto whitespace-nowrap space-x-4 flex px-2 pb-4 snap-x snap-mandatory">
    <div class="inline-block w-48 h-48 flex-shrink-0 snap-center">
      <a href="https://eric-mode-business-boomin.nfts2.me/" target="_blank">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5510.jpeg"
             alt="Eric Mode" class="w-48 h-48 rounded neon-border object-cover" loading="lazy"/>
      </a>
    </div>
    <div class="inline-block w-48 h-48 flex-shrink-0 snap-center">
      <a href="https://cronoshadow.nfts2.me/" target="_blank">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5403.jpeg"
             alt="Cards of Cronos" class="w-48 h-48 rounded neon-border object-cover" loading="lazy"/>
      </a>
    </div>
    <div class="inline-block w-48 h-48 flex-shrink-0 snap-center">
      <a href="https://creative-diamondhands-final-strike-mode.nfts2.me/" target="_blank">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5299.jpeg"
             alt="DiamondHands" class="w-48 h-48 rounded neon-border object-cover" loading="lazy"/>
      </a>
    </div>
    <div class="inline-block w-48 h-48 flex-shrink-0 snap-center">
      <a href="https://dojo-warriors-anthem.nfts2.me/" target="_blank">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5285.jpeg"
             alt="Dojo Warriors" class="w-48 h-48 rounded neon-border object-cover" loading="lazy"/>
      </a>
    </div>
  </div>
</section>

  <!-- Submit Roast Section -->
<section id="submit-roast" class="py-16 px-6 bg-black text-center">
  <h3 class="text-4xl glitch font-bold mb-4">Submit a Roast Target</h3>
  <p class="text-gray-400 max-w-xl mx-auto mb-4">
    Submit a name from ùïè. Pay with CRO or SOL. The top roast wins the prize pot.
  </p>

  <div class="text-lg text-pink-400 font-bold mb-6">
    This Week's Pool: <span id="poolCRO">0 CRO</span> + <span id="poolSOL">0 SOL</span>
  </div>

  <div id="walletStatus" class="mb-4 text-sm flex flex-col items-center gap-2">
    <div class="flex gap-4">
      <span class="px-3 py-1 rounded-full bg-gray-800">CRO: Not Connected</span>
      <span class="px-3 py-1 rounded-full bg-gray-800">SOL: Not Connected</span>
    </div>
    <div class="flex gap-2">
      <button onclick="disconnectCRO()" id="disconnectCroBtn" class="hidden px-2 py-1 text-xs rounded bg-red-900 hover:bg-red-800">
        Disconnect CRO
      </button>
      <button onclick="disconnectSOL()" id="disconnectSolBtn" class="hidden px-2 py-1 text-xs rounded bg-red-900 hover:bg-red-800">
        Disconnect SOL
      </button>
    </div>
  </div>

  <form id="roastForm" class="max-w-md mx-auto space-y-4">
    <input type="text" id="targetName" name="target" placeholder="@name or project from ùïè"
           class="w-full p-3 rounded bg-[#1a1a1a] text-white neon-border"/>
    <div class="grid grid-cols-2 gap-4">
      <button type="button" id="submitCroBtn" onclick="submitWithCRO()"
              class="w-full bg-[#ff00ff] text-black font-bold py-2 rounded hover:bg-pink-600 transition-all">
        Pay with CRO
      </button>
      <button type="button" id="submitSolBtn" onclick="submitWithSOL()"
              class="w-full bg-[#00ffff] text-black font-bold py-2 rounded hover:bg-cyan-400 transition-all">
        Pay with SOL
      </button>
    </div>
  </form>

  <div id="roastResult" class="mt-4 text-green-400 text-sm"></div>
  <div id="shareRoast" class="mt-4"></div>
</section>

<!-- Roasted Section -->
<section id="roasted" class="py-16 px-6 bg-[#111] text-center">
  <h3 class="text-4xl glitch font-bold mb-8">ROASTED</h3>
  <p class="text-gray-400 max-w-xl mx-auto mb-6">
    These names got scorched this week. Fire them up or drop your own below.
  </p>
  <div id="roastList" class="grid gap-4 max-w-2xl mx-auto text-left text-sm text-gray-200"></div>
</section>

<!-- DEX Section -->
<section id="dex" class="bg-[#111] py-12 px-4 text-center">
  <h3 class="text-3xl glitch font-bold mb-4">Trade with Fire</h3>
  <div class="flex flex-col gap-4 mt-6">
    <a href="https://dexscreener.com/cronos/0xDdF11258F392080BC16cF26aA1C58A19c50b9641" 
       target="_blank" 
       class="px-6 py-3 glow bg-opacity-20 bg-pink-600 hover:bg-opacity-30 transition-all">
      Trade $Y2K (Cronos)
    </a>
    <a href="https://raydium.io/launchpad/token/?mint=A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray" 
       target="_blank" 
       class="px-6 py-3 glow bg-opacity-20 bg-cyan-600 hover:bg-opacity-30 transition-all">
      Trade $ROAST (Solana)
    </a>
  </div>
</section>

<!-- Connect Section -->
<section id="connect" class="py-12 px-4 text-center">
  <h3 class="text-3xl glitch font-bold mb-4">Stay Plugged In</h3>
  <p class="text-gray-400 mb-6">Join the fam. Talk your shit. Earn your spot.</p>
  <div class="flex justify-center gap-4">
    <a href="https://discord.gg/XxtpYNXX4a" target="_blank" class="neon-border px-4 py-2 hover:bg-[#ff00ff] hover:bg-opacity-20 transition-all">Discord</a>
    <a href="https://x.com/y2kc0in?s=21" target="_blank" class="neon-border px-4 py-2 hover:bg-[#ff00ff] hover:bg-opacity-20 transition-all">ùïè (Twitter)</a>
  </div>
</section>

<!-- Footer -->
<footer class="bg-black text-center text-sm py-8 px-4 text-gray-600">
  Y2KCoin & $ROAST ‚Äî Contract Addresses:<br/>
  <span class="break-all">Cronos: 0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d</span><br/>
  <span class="break-all">Solana: A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray</span>
</footer>

<style>
  html { 
    background-color: #0a0a0a; 
    scroll-behavior: smooth;
  }
  
  body {
    background-color: #0a0a0a;
    font-family: 'Rubik', sans-serif;
    color: #e2e8f0;
    overflow-x: hidden;
  }
  
  .glitch {
    text-shadow: 2px 0 red, -2px 0 cyan;
    font-family: 'Orbitron', sans-serif;
    animation: glitch 4s infinite;
  }
  
  @keyframes glitch {
    0%, 100% { text-shadow: 2px 0 red, -2px 0 cyan; }
    25% { text-shadow: -2px 0 red, 2px 0 cyan; }
    50% { text-shadow: 2px 0 cyan, -2px 0 red; }
    75% { text-shadow: -2px 0 cyan, 2px 0 red; }
  }
  
  .neon-border {
    border: 2px solid #ff00ff;
    box-shadow: 0 0 10px #ff00ff;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .neon-border:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 0, 255, 0.2),
      transparent
    );
    transition: 0.5s;
  }
  
  .neon-border:hover:before {
    left: 100%;
  }
  
  .neon-border:active {
    transform: scale(0.95);
    box-shadow: 0 0 5px #ff00ff;
  }
  
  .glow {
    box-shadow: 0 0 20px #ff0077;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }
  
  .glow:before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 0, 119, 0.2),
      transparent
    );
    transition: 0.5s;
  }
  
  .glow:hover:before {
    left: 100%;
  }
  
  .glow:active {
    transform: scale(0.95);
    box-shadow: 0 0 10px #ff0077;
  }
  
  #nfts img {
    width: 192px;
    height: 192px;
    object-fit: cover;
    display: block;
    transition: transform 0.3s ease;
  }
  
  #nfts img:hover {
    transform: scale(1.05);
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  #toast.show {
    display: block;
    animation: fadeIn 0.3s ease-out;
  }

  /* Mobile optimizations */
  @media (max-width: 640px) {
    .glitch {
      font-size: 1.5rem;
    }
    
    nav {
      font-size: 0.875rem;
    }
    
    #nfts img {
      width: 160px;
      height: 160px;
    }
  }
</style>

<script>
// Toast notification system
function showToast(message, duration = 3000) {
  const toast = document.getElementById('toast');
  const toastMessage = document.getElementById('toastMessage');
  toastMessage.textContent = message;
  toast.classList.add('show');
  toast.classList.remove('hidden');
  
  setTimeout(() => {
    toast.classList.remove('show');
    toast.classList.add('hidden');
  }, duration);
}

// CRO Transaction Handler
async function submitWithCRO() {
  const submitBtn = document.getElementById('submitCroBtn');
  const target = document.getElementById('targetName').value.trim();
  const resultBox = document.getElementById('roastResult');
  const shareBox = document.getElementById('shareRoast');

  if (!target || target.length < 3 || !target.startsWith('@')) {
    showToast('Enter a valid ùïè username or project (start with @)');
    return;
  }

  submitBtn.disabled = true;
  submitBtn.innerText = 'Processing...';

  try {
    if (typeof window.ethereum === "undefined") {
      throw new Error('MetaMask not detected');
    }

    // Request account access
    const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
    if (!accounts || accounts.length === 0) {
      throw new Error('Please connect your wallet');
    }

    // Switch to Cronos network
    try {
      await window.ethereum.request({
        method: "wallet_switchEthereumChain",
        params: [{ chainId: "0x19" }],
      });
    } catch (switchError) {
      if (switchError.code === 4902) {
        await window.ethereum.request({
          method: "wallet_addEthereumChain",
          params: [{
            chainId: "0x19",
            chainName: "Cronos Mainnet",
            nativeCurrency: {
              name: "CRO",
              symbol: "CRO",
              decimals: 18
            },
            rpcUrls: ["https://evm.cronos.org"],
            blockExplorerUrls: ["https://cronoscan.com/"]
          }]
        });
      } else {
        throw switchError;
      }
    }

    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const signer = provider.getSigner();

    showToast('Confirm the transaction in your wallet...');

    const tx = await signer.sendTransaction({
      to: "0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100", // Replace with your CRO wallet address
      value: ethers.utils.parseEther("60"),
      gasLimit: 100000
    });

    showToast('Transaction submitted, waiting for confirmation...');
    const receipt = await tx.wait();

    resultBox.innerHTML = `
      <div class="p-4 bg-green-900/50 rounded-lg mt-4">
        <p>üéØ Roast for "${target}" submitted!</p>
        <a href="https://cronoscan.com/tx/${receipt.transactionHash}" target="_blank" 
           class="text-blue-400 hover:underline text-sm">
          View Transaction
        </a>
      </div>
    `;

    const tweetText = encodeURIComponent(
      `I just submitted ${target} to be roasted using $Y2KCoin on CRO.\nWeb3 verified. Vote or die.`
    );
    const tweetURL = `https://twitter.com/intent/tweet?text=${tweetText}&hashtags=Y2KRoast,CROFam`;
    
    shareBox.innerHTML = `
      <a href="${tweetURL}" target="_blank" 
         class="inline-block mt-4 px-4 py-2 bg-[#ff00ff] text-black font-bold rounded hover:bg-pink-600">
        Share on ùïè
      </a>
    `;

    showToast('Roast submitted successfully! üî•');

  } catch (err) {
    console.error('CRO Transaction failed:', err);
    resultBox.innerHTML = `
      <div class="p-4 bg-red-900/50 rounded-lg mt-4">
        <p>‚ùå Transaction failed:</p>
        <p class="text-sm">${err.message}</p>
      </div>
    `;
    showToast('Transaction failed. Check details below.');
  } finally {
    submitBtn.disabled = false;
    submitBtn.innerText = 'Pay with CRO';
  }
}

// Solana Transaction Handler
async function submitWithSOL() {
  const submitBtn = document.getElementById('submitSolBtn');
  const target = document.getElementById('targetName').value.trim();
  const resultBox = document.getElementById('roastResult');
  const shareBox = document.getElementById('shareRoast');

  if (!target || target.length < 3 || !target.startsWith('@')) {
    showToast('Enter a valid ùïè username or project (start with @)');
    return;
  }

  submitBtn.disabled = true;
  submitBtn.innerText = 'Processing...';

  try {
    const wallet = await getSolanaWallet();
    if (!wallet) {
      showSolanaWalletModal();
      throw new Error('Please connect a Solana wallet');
    }

    if (!wallet.isConnected) {
      await wallet.connect();
    }

    const connection = new solanaWeb3.Connection(
      'https://api.mainnet-beta.solana.com',
      'confirmed'
    );

    const transaction = new solanaWeb3.Transaction().add(
      solanaWeb3.SystemProgram.transfer({
        fromPubkey: wallet.publicKey,
        toPubkey: new solanaWeb3.PublicKey('HQcgVnNacvvjK4ToX8Pcq2bKmD5s32XR6AarQ2EVrrpq'), // Replace with your SOL wallet address
        lamports: solanaWeb3.LAMPORTS_PER_SOL * 0.1 // 0.1 SOL
      })
    );

    const { blockhash } = await connection.getLatestBlockhash('finalized');
    transaction.recentBlockhash = blockhash;
    transaction.feePayer = wallet.publicKey;

    showToast('Confirm the transaction in your wallet...');

    const signature = await wallet.sendTransaction(transaction, connection);
    showToast('Transaction submitted, waiting for confirmation...');

    await connection.confirmTransaction(signature, 'confirmed');

    resultBox.innerHTML = `
      <div class="p-4 bg-green-900/50 rounded-lg mt-4">
        <p>üéØ Roast for "${target}" submitted!</p>
        <a href="https://solscan.io/tx/${signature}" target="_blank" 
           class="text-blue-400 hover:underline text-sm">
          View Transaction
        </a>
      </div>
    `;

    const tweetText = encodeURIComponent(
      `I just submitted ${target} to be roasted using $ROAST on Solana.\nWeb3 verified. Vote or die.`
    );
    const tweetURL = `https://twitter.com/intent/tweet?text=${tweetText}&hashtags=Y2KRoast,Solana`;
    
    shareBox.innerHTML = `
      <a href="${tweetURL}" target="_blank" 
         class="inline-block mt-4 px-4 py-2 bg-[#00ffff] text-black font-bold rounded hover:bg-cyan-400">
        Share on ùïè
      </a>
    `;

    showToast('Roast submitted successfully! üî•');

  } catch (err) {
    console.error('SOL Transaction failed:', err);
    resultBox.innerHTML = `
      <div class="p-4 bg-red-900/50 rounded-lg mt-4">
        <p>‚ùå Transaction failed:</p>
        <p class="text-sm">${err.message}</p>
      </div>
    `;
    showToast('Transaction failed. Check details below.');
  } finally {
    submitBtn.disabled = false;
    submitBtn.innerText = 'Pay with SOL';
  }
}

// Wallet detection and status updates
async function getSolanaWallet() {
  if (window.phantom?.solana && window.phantom.solana.isPhantom) {
    return window.phantom.solana;
  }
  if (window.solana?.isPhantom) {
    return window.solana;
  }
  if (window.solflare) {
    return window.solflare;
  }
  return null;
}

async function updateWalletStatuses() {
  const walletStatus = document.getElementById('walletStatus').querySelector('.flex.gap-4');
  const disconnectCroBtn = document.getElementById('disconnectCroBtn');
  const disconnectSolBtn = document.getElementById('disconnectSolBtn');

  // Check CRO wallet
  if (typeof window.ethereum === "undefined") {
    walletStatus.innerHTML = '<span class="px-3 py-1 rounded-full bg-red-900">CRO: No Wallet</span>';
    disconnectCroBtn.classList.add('hidden');
  } else {
    try {
      const accounts = await window.ethereum.request({ method: 'eth_accounts' });
      if (accounts && accounts.length > 0) {
        walletStatus.innerHTML = `<span class="px-3 py-1 rounded-full bg-green-900">
          CRO: ${accounts[0].slice(0, 6)}...${accounts[0].slice(-4)}
        </span>`;
        disconnectCroBtn.classList.remove('hidden');
      } else {
        walletStatus.innerHTML = '<span class="px-3 py-1 rounded-full bg-yellow-900">CRO: Not Connected</span>';
        disconnectCroBtn.classList.add('hidden');
      }
    } catch (err) {
      walletStatus.innerHTML = '<span class="px-3 py-1 rounded-full bg-red-900">CRO: Error</span>';
      disconnectCroBtn.classList.add('hidden');
    }
  }

  // Check Solana wallet
  const solanaWallet = await getSolanaWallet();
  if (!solanaWallet) {
    walletStatus.innerHTML += '<span class="px-3 py-1 rounded-full bg-red-900">SOL: No Wallet</span>';
    disconnectSolBtn.classList.add('hidden');
  } else if (solanaWallet.isConnected) {
    const pubKey = solanaWallet.publicKey.toString();
    walletStatus.innerHTML += `<span class="px-3 py-1 rounded-full bg-green-900">
      SOL: ${pubKey.slice(0, 6)}...${pubKey.slice(-4)}
    </span>`;
    disconnectSolBtn.classList.remove('hidden');
  } else {
    walletStatus.innerHTML += '<span class="px-3 py-1 rounded-full bg-yellow-900">SOL: Not Connected</span>';
    disconnectSolBtn.classList.add('hidden');
  }
}

// Disconnect handlers
async function disconnectCRO() {
  if (window.ethereum) {
    try {
      localStorage.removeItem('walletconnect');
      localStorage.removeItem('WALLETCONNECT_DEEPLINK_CHOICE');
      showToast('Disconnecting CRO wallet...');
      setTimeout(() => window.location.reload(), 1000);
    } catch (err) {
      console.error('Error disconnecting CRO wallet:', err);
      showToast('Error disconnecting CRO wallet');
    }
  }
}

async function disconnectSOL() {
  const wallet = await getSolanaWallet();
  if (wallet && wallet.isConnected) {
    try {
      await wallet.disconnect();
      showToast('Disconnecting SOL wallet...');
      setTimeout(() => window.location.reload(), 1000);
    } catch (err) {
      console.error('Error disconnecting SOL wallet:', err);
      showToast('Error disconnecting SOL wallet');
    }
  }
}

// Initialize
document.addEventListener('DOMContentLoaded', async () => {
  updateWalletStatuses();
  
  // Setup CRO wallet events
  if (window.ethereum) {
    window.ethereum.on('accountsChanged', updateWalletStatuses);
    window.ethereum.on('chainChanged', () => window.location.reload());
    window.ethereum.on('disconnect', () => window.location.reload());
  }
  
  // Setup Solana wallet events
  const solanaWallet = await getSolanaWallet();
  if (solanaWallet) {
    solanaWallet.on('connect', () => {
      updateWalletStatuses();
      showToast('Solana wallet connected');
    });
    solanaWallet.on('disconnect', () => {
      updateWalletStatuses();
      showToast('Solana wallet disconnected');
    });
    if (solanaWallet.on) {
      solanaWallet.on('accountChanged', updateWalletStatuses);
    }
  }
});
</script>

</body>
</html>
