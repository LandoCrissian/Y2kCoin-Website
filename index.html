<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <title>Welcome to Y2K | ROAST RECORDS Studio</title>
  <meta name="description" content="The CROFAM music studio. Submit a request, fund the ecosystem, own the moment.">
  <meta name="theme-color" content="#0a0a0a" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script src="https://bundle.run/buffer@6.0.3"></script>
  <style>
    :root { color-scheme: dark; --accent: #ff00ff; }
    html, body {
      background-color: #0a0a0a;
      color: #e2e8f0;
      font-family: 'Rubik', sans-serif;
      overflow-x: hidden;
    }
    .neon-text {
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 5px var(--accent), 0 0 10px var(--accent);
    }
    .neon-border {
      border: 2px solid var(--accent);
      box-shadow: 0 0 10px var(--accent);
      border-radius: 10px;
    }
    .neon-border:hover { box-shadow: 0 0 20px var(--accent); }
    .glow-button {
      padding: 0.75rem 1.5rem;
      border: 1px solid var(--accent);
      background: rgba(255, 0, 255, 0.1);
      color: white;
      border-radius: 8px;
      font-weight: bold;
    }
    .glow-button:hover {
      background: rgba(255, 0, 255, 0.2);
      box-shadow: 0 0 20px var(--accent);
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.04);
      backdrop-filter: blur(12px);
      border-radius: 14px;
      padding: 1.5rem;
    }
    .floating { animation: floaty 6s ease-in-out infinite; }
    @keyframes floaty {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    @keyframes spin {
      0% { transform: rotate(0); }
      100% { transform: rotate(360deg); }
    }
    .toast {
  background: rgba(255, 0, 255, 0.15);
  border: 1px solid var(--accent);
  padding: 1rem 1.25rem;
  border-radius: 10px;
  color: white;
  font-weight: bold;
  box-shadow: 0 0 20px var(--accent);
  animation: fadein 0.4s, floatup 0.4s, fadeout 0.4s 4.6s;
}
@keyframes fadein {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes floatup {
  0% { transform: translateY(10px); }
  100% { transform: translateY(0); }
}
@keyframes fadeout {
  to { opacity: 0; transform: translateY(-10px); }
}
  </style>
</head>
<body>
<div id="app" class="relative">
<div id="enterOverlay" class="fixed inset-0 bg-black bg-opacity-90 flex flex-col justify-center items-center z-50 px-4">
  <h1 class="text-4xl md:text-5xl neon-text font-bold mb-8 animate-pulse">Welcome to Y2K</h1>
  <button onclick="enterPortal()" class="px-8 py-4 neon-border text-white font-bold text-xl hover:bg-pink-600 transition">Enter Portal</button>
</div>

<header class="fixed top-0 left-0 w-full p-4 z-40 bg-black bg-opacity-80 backdrop-blur flex justify-between items-center">
  <div class="flex items-center gap-4">
    <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/IMG_5445.jpeg" class="w-10 h-10 rounded-full neon-border" />
    <h1 class="text-xl neon-text font-bold">Welcome to Y2K</h1>
  </div>
  <nav class="flex gap-4 text-white text-sm">
    <a href="#submit" class="hover:text-pink-400 transition">Studio</a>
    <a href="#vault" class="hover:text-pink-400 transition">Vault</a>
    <a href="#nfts" class="hover:text-pink-400 transition">NFTs</a>
  </nav>
</header>
<div class="h-20"></div>

<section class="text-center py-20 px-6" id="portal">
  <div class="flex justify-center mb-6">
    <div class="w-64 h-64 rounded-full neon-border floating"
         style="background: url('https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/IMG_5445.jpeg') center/cover; animation: spin 14s linear infinite;"></div>
  </div>
  <h1 class="text-4xl md:text-5xl neon-text font-bold mb-4">ROAST RECORDS</h1>
  <p class="text-lg text-gray-400 max-w-2xl mx-auto mb-10">
    The CROFAM Studio ‚Äî create your anthem, soundtrack, or roast. Submissions support the ecosystem. All heat, no chill.
  </p>

    <!-- Wallet Connect + Submission Block -->
  <div class="glass-card max-w-2xl mx-auto space-y-8">
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <button onclick="connectCRO()" class="glow-button w-full">Connect CRO Wallet</button>
        <div id="croStatus" class="text-sm text-gray-400 mt-2">Not connected</div>
      </div>
      <div>
        <button onclick="connectSOL()" class="glow-button w-full">Connect SOL Wallet</button>
        <div id="solStatus" class="text-sm text-gray-400 mt-2">Not connected</div>
      </div>
    </div>
    <div id="balanceStatus" class="text-xs text-gray-400 text-center"></div>

    <form id="submissionForm" class="space-y-4 mt-6">
      <select id="requestType" required class="w-full p-4 neon-border bg-black text-white text-lg text-center rounded">
        <option value="">Select Type</option>
        <option value="Anthem">Anthem / Theme Song</option>
        <option value="Custom Song">Custom Song</option>
        <option value="Roast">Roast</option>
        <option value="Other">Intro / Skit / Audio Request</option>
      </select>

      <input type="text" id="handle" placeholder="@YourHandle" required
        class="w-full p-4 neon-border bg-black text-white text-center rounded text-lg"/>

      <textarea id="notes" placeholder="Describe the request: tone, project, name, etc."
        class="w-full p-4 neon-border bg-black text-white rounded text-lg h-32 resize-none"></textarea>

      <label class="flex items-center gap-3 text-white text-left text-sm">
        <input type="checkbox" id="limitedMint" class="accent-pink-500 w-5 h-5"/>
        <span>
          Request Limited Mint (10 editions at 50 CRO each).
          <br/>
          <span class="text-gray-400 text-xs italic">
            500 CRO will be used to buy back project tokens ‚Äî or Y2K if personal.
          </span>
        </span>
      </label>

      <button type="button" onclick="submitStudioRequest()" class="w-full glow-button text-lg">Submit (20 CRO)</button>
    </form>
    <div id="studioStatus" class="mt-6 text-sm text-white"></div>
  </div>
</section>

  <section id="live" class="py-16 px-6 bg-[#111] text-center">
  <h2 class="text-3xl neon-text font-bold mb-8">Live Submissions</h2>
  <div id="liveRequests" class="flex overflow-x-auto gap-6 snap-x snap-mandatory"></div>
</section>

<!-- Vault + Token Access -->
<section id="vault" class="py-12 px-6 text-center bg-[#111]">
  <h2 class="text-3xl md:text-5xl neon-text font-bold mb-8">Access the Ecosystem</h2>
  <div class="flex flex-col md:flex-row justify-center gap-6">
    <a href="https://y2k-the-vault.netlify.app/" target="_blank"
       class="px-8 py-4 neon-border text-white font-bold text-xl hover:bg-pink-600 transition rounded-lg">üîê Enter The Vault</a>
    <a href="https://obsidian.finance/?outputCurrency=0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" target="_blank"
       class="px-8 py-4 neon-border text-white font-bold text-xl hover:bg-pink-600 transition rounded-lg">Buy $Y2K</a>
    <a href="https://raydium.io/launchpad/token/?mint=A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray" target="_blank"
       class="px-8 py-4 neon-border text-white font-bold text-xl hover:bg-pink-600 transition rounded-lg">Trade $ROAST</a>
  </div>

  <div id="confirmationOverlay" class="fixed inset-0 bg-black bg-opacity-90 flex flex-col justify-center items-center z-50 px-4 hidden">
  <h2 class="text-3xl neon-text font-bold mb-4">Submission Confirmed!</h2>
  <p class="text-lg text-white mb-6">Your request has been received and is now live.</p>
  <a id="shareOnX" href="#" target="_blank" class="glow-button mb-4">Share on ùïè</a>
  <button onclick="closeConfirmation()" class="glow-button">Close</button>
</div>
</section>

  <!-- Firebase Setup -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCLGt0gVlI8BKdrpME4IefwVjF_ehJJmug",
    authDomain: "y2kroast-512ee.firebaseapp.com",
    projectId: "y2kroast-512ee",
    storageBucket: "y2kroast-512ee.appspot.com",
    messagingSenderId: "602588659855",
    appId: "1:602588659855:web:f01efa4b81e737d26270fa"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const liveContainer = document.getElementById('liveRequests');

  // Display live submissions and toast new ones
  onSnapshot(collection(db, "studio_requests"), (querySnapshot) => {
  const docs = [];
  querySnapshot.forEach((doc) => {
    docs.push({ id: doc.id, ...doc.data() });
  });

  // Sort by timestamp ascending (oldest first)
  docs.sort((a, b) => a.timestamp - b.timestamp);

  liveContainer.innerHTML = '';
  if (!window.__loadedIds) window.__loadedIds = new Set();

  docs.forEach((data) => {
    // Show toast only once per session
    if (!window.__loadedIds.has(data.id)) {
      showToast(`${data.handle} just submitted a ${data.type}`);
    }

    window.__loadedIds.add(data.id);

    const date = new Date(data.timestamp);
    const formattedDate = date.toLocaleString('en-US', {
      dateStyle: 'medium',
      timeStyle: 'short',
    });

    const item = document.createElement('div');
    item.className = "snap-center bg-black glass-card min-w-[300px] p-4 neon-border text-left";

    item.innerHTML = `
      <div class="flex justify-between items-center mb-2">
        <div class="text-pink-400 text-sm font-bold">${data.type}</div>
        ${data.limitedMint ? '<div class="text-xs text-white bg-pink-600 px-2 py-1 rounded-full">LIMITED MINT</div>' : ''}
      </div>
      <div class="text-white text-lg mb-1">${data.handle}</div>
      <div class="text-gray-300 text-sm mb-2">${data.notes || 'No notes provided.'}</div>
      <div class="text-xs text-green-400 break-all mb-1">Tx: ${data.txHash.slice(0, 8)}...${data.txHash.slice(-8)}</div>
      <div class="text-xs text-gray-500">${formattedDate}</div>
    `;
    liveContainer.appendChild(item);
  });
});

  // Expose Firebase globally if needed elsewhere
  window.db = db;
  window.collection = collection;
  window.addDoc = addDoc;
</script>

<!-- Wallet Connect Logic -->
<script>
let croWallet = null;

const CRONOS_MAINNET = {
  chainId: '0x19',
  chainName: 'Cronos Mainnet',
  nativeCurrency: { name: 'CRO', symbol: 'CRO', decimals: 18 },
  rpcUrls: ['https://evm.cronos.org'],
  blockExplorerUrls: ['https://cronoscan.com/']
};

async function connectCRO() {
  try {
    if (!window.ethereum) throw new Error("Install MetaMask or DeFi Wallet.");
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);

    try {
      await window.ethereum.request({
        method: 'wallet_switchEthereumChain',
        params: [{ chainId: CRONOS_MAINNET.chainId }],
      });
    } catch (switchError) {
      if (switchError.code === 4902) {
        await window.ethereum.request({
          method: 'wallet_addEthereumChain',
          params: [CRONOS_MAINNET],
        });
      } else {
        throw switchError;
      }
    }

    croWallet = provider;
    const signer = provider.getSigner();
    const address = await signer.getAddress();
    const balance = await provider.getBalance(address);

    document.getElementById('croStatus').innerHTML = `<span class="text-green-400">‚úì</span> CRO: ${address.slice(0,6)}...${address.slice(-4)}`;
    document.getElementById('balanceStatus').textContent = `CRO Balance: ${ethers.utils.formatEther(balance).slice(0,6)} CRO`;

  } catch (err) {
    console.error("CRO Connect Error", err);
    document.getElementById('croStatus').innerHTML = `<span class="text-red-400">‚úó</span> ${err.message}`;
  }
}

  async function sendCRO(amount, toAddress) {
  if (!croWallet) throw new Error("Connect your CRO wallet first.");
  const signer = croWallet.getSigner();
  const tx = await signer.sendTransaction({
    to: toAddress,
    value: ethers.utils.parseEther(amount)
  });
  return tx.hash;
}
</script>

<!-- Studio Submission Logic -->
<script>
async function submitStudioRequest() {
  const type = document.getElementById('requestType').value;
  const handle = document.getElementById('handle').value.trim();
  const notes = document.getElementById('notes').value.trim();
  const limitedMint = document.getElementById('limitedMint').checked;
  const status = document.getElementById('studioStatus');

  if (!type || !handle.startsWith('@')) {
    status.innerHTML = `<span class="text-red-400">Please enter a valid type and handle (@handle).</span>`;
    return;
  }

  try {
    status.innerHTML = `<span class="text-yellow-400">Sending 20 CRO...</span>`;
    const signer = croWallet.getSigner();
    const userAddress = await signer.getAddress();
    const message = `I authorize this ROAST RECORDS request from ${userAddress} at ${new Date().toISOString()}`;
    const signature = await signer.signMessage(message);
    const txHash = await sendCRO("20", "0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100");

    await addDoc(collection(db, "studio_requests"), {
      type,
      handle,
      notes,
      limitedMint,
      txHash,
      croAddress: userAddress,
      message,
      signature,
      timestamp: Date.now()
    });

    status.innerHTML = `<div class="text-green-400">Submitted! Tx: ${txHash}</div>`;
    showConfirmationOverlay(handle);
    document.getElementById('submissionForm').reset();
  } catch (err) {
    console.error("Submission Error", err);
    status.innerHTML = `<span class="text-red-400">Error: ${err.message}</span>`;
  }
}
</script>

<!-- Footer -->
<footer class="relative z-10 py-10 bg-black text-center text-gray-500 text-sm">
  <div class="mb-4">Built for CROFAM. Fueled by music, memes, and Y2K energy.</div>
  <div class="flex justify-center gap-6 text-white mt-6">
    <a href="https://discord.gg/XxtpYNXX4a" target="_blank" class="hover:text-pink-400 transition">Join Discord</a>
    <a href="https://x.com/y2kc0in?s=21" target="_blank" class="hover:text-pink-400 transition">Follow ùïè</a>
    <a href="https://y2k-the-vault.netlify.app/" target="_blank" class="hover:text-yellow-400 transition">Enter Vault</a>
  </div>
</footer>

<!-- Entry Logic -->
<script>
function enterPortal() {
  const overlay = document.getElementById('enterOverlay');
  if (!overlay) return;

  overlay.style.transition = "opacity 1s ease, transform 1s ease";
  overlay.style.opacity = 0;
  overlay.style.transform = "scale(1.05)";

  setTimeout(() => {
    overlay.remove();
    const portal = document.getElementById('portal');
    if (portal) {
      portal.scrollIntoView({ behavior: 'smooth' });
    }

    // Now that overlay is gone, play queued toasts
    if (window.toastQueue?.length) {
      toastQueue.forEach(msg => showToast(msg));
      toastQueue = [];
    }
  }, 1000);
}
</script>

  <script>
// Smooth scroll nav (FIXED: now inside a proper script tag)
window.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      document.querySelector(this.getAttribute('href')).scrollIntoView({
        behavior: 'smooth'
      });
    });
  });
});
</script>

  <!-- Live Toast Container -->
<div id="toastContainer" class="fixed bottom-6 right-6 space-y-2 z-50"></div>

<script>
let toastQueue = [];

function showToast(message) {
  const toastContainer = document.getElementById('toastContainer');
  if (!toastContainer || document.getElementById('enterOverlay')) {
    toastQueue.push(message);
    return;
  }

  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.textContent = message;
  toastContainer.appendChild(toast);

  setTimeout(() => toast.remove(), 5000);
}
</script>

  <script>
function showConfirmationOverlay(handle) {
  const overlay = document.getElementById('confirmationOverlay');
  const shareBtn = document.getElementById('shareOnX');
  if (overlay) overlay.classList.remove('hidden');
  if (shareBtn) {
    shareBtn.href = `https://x.com/intent/tweet?text=${encodeURIComponent(`${handle} just submitted to ROAST RECORDS! Check it out at y2kcoin.org #CROFAM #Y2K`)}`;
  }
}
function closeConfirmation() {
  document.getElementById('confirmationOverlay').classList.add('hidden');
}
</script>
  
</body>
</html>

  


  


  


  


  


  

