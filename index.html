<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <title>Welcome to Y2K | ROAST RECORDS Studio</title>
  <meta name="description" content="The CROFAM music studio. Submit a request, fund the ecosystem, own the moment.">
  <meta name="theme-color" content="#0a0a0a" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  <script src="https://bundle.run/buffer@6.0.3"></script>
  <style>
    :root { color-scheme: dark; --accent: #ff00ff; }
    html, body {
      background-color: #0a0a0a;
      color: #e2e8f0;
      font-family: 'Rubik', sans-serif;
      overflow-x: hidden;
    }
    .neon-text {
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 5px var(--accent), 0 0 10px var(--accent);
    }
    .neon-border {
      border: 2px solid var(--accent);
      box-shadow: 0 0 10px var(--accent);
      border-radius: 10px;
    }
    .neon-border:hover { box-shadow: 0 0 20px var(--accent); }
    .glow-button {
      padding: 0.75rem 1.5rem;
      border: 1px solid var(--accent);
      background: rgba(255, 0, 255, 0.1);
      color: white;
      border-radius: 8px;
      font-weight: bold;
    }
    .glow-button:hover {
      background: rgba(255, 0, 255, 0.2);
      box-shadow: 0 0 20px var(--accent);
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.04);
      backdrop-filter: blur(12px);
      border-radius: 14px;
      padding: 1.5rem;
    }
    .floating { animation: floaty 6s ease-in-out infinite; }
    @keyframes floaty {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    @keyframes spin {
      0% { transform: rotate(0); }
      100% { transform: rotate(360deg); }
    }
    .toast {
      background: rgba(255, 0, 255, 0.15);
      border: 1px solid var(--accent);
      padding: 1rem 1.25rem;
      border-radius: 10px;
      color: white;
      font-weight: bold;
      box-shadow: 0 0 20px var(--accent);
      animation: fadein 0.4s, floatup 0.4s, fadeout 0.4s 4.6s;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes floatup {
      0% { transform: translateY(10px); }
      100% { transform: translateY(0); }
    }
    @keyframes fadeout {
      to { opacity: 0; transform: translateY(-10px); }
    }
  </style>
<body class="scroll-smooth overflow-y-auto bg-black">

  <!-- Portal Entry Overlay -->
  <div id="enterOverlay" class="fixed inset-0 bg-black bg-opacity-90 flex flex-col justify-center items-center z-50 px-4">
    <h1 class="text-4xl md:text-5xl neon-text font-bold mb-8 animate-pulse">Welcome to Y2K</h1>
    <button onclick="enterPortal()" class="px-8 py-4 neon-border text-white font-bold text-xl hover:bg-pink-600 transition">Enter Portal</button>
  </div>

  <!-- Sticky Header -->
  <header class="fixed top-0 left-0 w-full p-4 z-50 bg-black bg-opacity-80 backdrop-blur flex justify-between items-center">
    <div class="flex items-center gap-4">
      <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/IMG_5445.jpeg" class="w-10 h-10 rounded-full neon-border" />
      <h1 class="text-xl neon-text font-bold">Y2K x ROAST</h1>
    </div>
    <nav class="flex gap-4 text-white text-sm">
      <a href="#console" class="hover:text-pink-400 transition">Access</a>
      <a href="#studio" class="hover:text-pink-400 transition">Studio</a>
      <a href="#vault" class="hover:text-pink-400 transition">Vault</a>
      <a href="#mints" class="hover:text-pink-400 transition">NFTs</a>
    </nav>
  </header>

  <!-- CROFAM Trust Strip -->
  <div class="fixed top-16 left-0 w-full text-center text-sm py-2 z-40 bg-gradient-to-r from-pink-500 via-fuchsia-600 to-purple-700 text-white font-semibold tracking-wide">
    Powered by CROFAM ‚Ä¢ Fueled by $Y2K and $ROAST ‚Ä¢ Syndicate Verified
  </div>

  <!-- Spacer -->
  <div class="h-24"></div>

<!-- HERO: Emblem Only -->
<section id="hero" class="min-h-screen flex flex-col justify-end items-center px-6 pt-32 pb-10 text-center relative z-10">
  <div class="w-64 h-64 rounded-full neon-border floating"
       style="background: url('https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/IMG_5445.jpeg') center/cover; animation: spin 14s linear infinite;"></div>
</section>

<!-- BUTTON GRID: Syndicate Console -->
<section id="access" class="relative z-10 py-8 px-6 text-center bg-black">
  <div class="max-w-4xl mx-auto grid grid-cols-2 sm:grid-cols-3 gap-4 sm:gap-6 md:gap-8">

    <a href="#studio" class="glow-button text-base sm:text-lg flex items-center justify-center gap-2 py-4 hover:scale-105 transition-all duration-300">
      üéôÔ∏è <span>Launch Studio</span>
    </a>

    <a href="/airdrops.html" class="glow-button text-base sm:text-lg flex items-center justify-center gap-2 py-4 hover:scale-105 transition-all duration-300">
      üéÅ <span>Airdrop Portal</span>
    </a>

    <a href="https://y2k-the-vault.netlify.app/" target="_blank" class="glow-button text-base sm:text-lg flex items-center justify-center gap-2 py-4 hover:scale-105 transition-all duration-300">
      üîê <span>Enter the Vault</span>
    </a>

    <a href="https://obsidian.finance/?outputCurrency=0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" target="_blank" class="glow-button text-base sm:text-lg flex items-center justify-center gap-2 py-4 hover:scale-105 transition-all duration-300">
      üü£ <span>Buy $Y2K</span>
    </a>

    <a href="https://raydium.io/launchpad/token/?mint=A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray" target="_blank" class="glow-button text-base sm:text-lg flex items-center justify-center gap-2 py-4 hover:scale-105 transition-all duration-300">
      üî• <span>Trade $ROAST</span>
    </a>

  </div>
</section>
  
  <!-- ROAST RECORDS SUBMISSION -->
<section id="studio" class="snap-start py-20 px-6 bg-[#0a0a0a] text-center">
  <h2 class="text-4xl md:text-5xl neon-text font-bold mb-6">ROAST RECORDS</h2>
  <p class="text-lg text-gray-400 max-w-2xl mx-auto mb-10 italic">The Syndicate‚Äôs Sound Engine</p>

  <div class="glass-card max-w-2xl mx-auto space-y-8">
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <button onclick="connectCRO()" class="glow-button w-full">Connect CRO Wallet</button>
        <div id="croStatus" class="text-sm text-gray-400 mt-2">Not connected</div>
      </div>
      <div>
        <button onclick="connectSOL()" class="glow-button w-full">Connect SOL Wallet</button>
        <div id="solStatus" class="text-sm text-gray-400 mt-2">Not connected</div>
      </div>
    </div>
    <div id="balanceStatus" class="text-xs text-gray-400 text-center"></div>

    <form id="submissionForm" class="space-y-4 mt-6">
      <select id="requestType" required class="w-full p-4 neon-border bg-black text-white text-lg text-center rounded">
        <option value="">Select Type</option>
        <option value="Anthem">Anthem / Theme Song</option>
        <option value="Custom Song">Custom Song</option>
        <option value="Roast">Roast</option>
        <option value="Other">Intro / Skit / Audio Request</option>
      </select>

      <input type="text" id="handle" placeholder="@YourHandle" required
             class="w-full p-4 neon-border bg-black text-white text-center rounded text-lg"/>

      <textarea id="notes" placeholder="Describe the request: tone, project, name, etc."
                class="w-full p-4 neon-border bg-black text-white rounded text-lg h-32 resize-none"></textarea>

      <label class="flex items-center gap-3 text-white text-left text-sm">
        <input type="checkbox" id="limitedMint" class="accent-pink-500 w-5 h-5"/>
        <span>
          Request Limited Mint (10 editions at 50 CRO each).<br/>
          <span class="text-gray-400 text-xs italic">
            500 CRO will be used to buy back project tokens ‚Äî or Y2K if personal.
          </span>
        </span>
      </label>

      <button type="button" onclick="submitStudioRequest()" class="w-full glow-button text-lg">Submit (20 CRO)</button>
    </form>
    <div id="studioStatus" class="mt-6 text-sm text-white"></div>
  </div>
</section>

<!-- Live Submissions Section -->
<section id="live" class="py-16 px-6 bg-[#111] text-center">
  <h2 class="text-3xl neon-text font-bold mb-8">Live Submissions</h2>
  <div id="liveRequests" class="flex overflow-x-auto gap-6 snap-x snap-mandatory"></div>
</section>

<!-- Mints Section -->
<section id="mints" class="py-16 px-6 bg-[#111] text-center">
  <h2 class="text-3xl neon-text font-bold mb-8">Live Mints</h2>
  <div id="mintCarousel" class="flex overflow-x-auto gap-6 snap-x snap-mandatory px-2 pb-4 scroll-smooth">
    <!-- MINT CARD: Eric -->
    <a href="https://eric-mode-business-boomin.nfts2.me/" style="text-decoration: none; color: inherit;" target="_blank">
      <div class="snap-center min-w-[280px] glass-card neon-border p-4 text-left">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5510.jpeg" alt="Eric Mint" class="w-full rounded mb-4"/>
        <h3 class="text-xl text-white font-bold mb-1">ERIC</h3>
        <p class="text-gray-400 text-sm">The original anthem. Genesis-level energy.</p>
      </div>
    </a>

    <a href="https://cronoshadow.nfts2.me/" target="_blank">
      <div class="snap-center min-w-[280px] glass-card neon-border p-4 text-left">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5403.jpeg" alt="Cards of Cronos" class="w-full rounded mb-4"/>
        <h3 class="text-xl text-white font-bold mb-1">Cards of Cronos</h3>
        <p class="text-gray-400 text-sm">Your on-chain fate sealed in sound.</p>
      </div>
    </a>

    <a href="https://creative-diamondhands-final-strike-mode.nfts2.me/" target="_blank">
      <div class="snap-center min-w-[280px] glass-card neon-border p-4 text-left">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5299.jpeg" alt="Diamond Hands" class="w-full rounded mb-4"/>
        <h3 class="text-xl text-white font-bold mb-1">Diamond Hands</h3>
        <p class="text-gray-400 text-sm">Hold through the static. This one's forever.</p>
      </div>
    </a>

    <a href="https://dojo-warriors-anthem.nfts2.me/" target="_blank">
      <div class="snap-center min-w-[280px] glass-card neon-border p-4 text-left">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5285.jpeg" alt="DOJO" class="w-full rounded mb-4"/>
        <h3 class="text-xl text-white font-bold mb-1">DOJO</h3>
        <p class="text-gray-400 text-sm">Discipline, chaos, and rhythm. Mint approved.</p>
      </div>
    </a>

    <a href="https://dead-chain-syndicate.nfts2.me/" target="_blank">
      <div class="snap-center min-w-[280px] glass-card neon-border p-4 text-left">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5743.jpeg" alt="The Syndicate" class="w-full rounded mb-4"/>
        <h3 class="text-xl text-white font-bold mb-1">The Syndicate</h3>
        <p class="text-gray-400 text-sm">Degens unite. The chain has no mercy.</p>
      </div>
    </a>
  </div>
</section>

  <!-- Vault Section -->
<section id="vault" class="py-12 px-6 text-center bg-[#111]">
  <h2 class="text-3xl md:text-5xl neon-text font-bold mb-8">Access the Ecosystem</h2>
  <div class="flex justify-center">
    <a href="https://y2k-the-vault.netlify.app/" target="_blank"
       class="px-8 py-4 neon-border text-white font-bold text-xl hover:bg-pink-600 transition rounded-lg">
       üîê Enter The Vault
    </a>
  </div>

  <!-- Confirmation Overlay -->
  <div id="confirmationOverlay" class="fixed inset-0 bg-black bg-opacity-90 flex flex-col justify-center items-center z-50 px-4 hidden">
    <h2 class="text-3xl neon-text font-bold mb-4">Submission Confirmed!</h2>
    <p class="text-lg text-white mb-2">Your request has been received and is now live.</p>
    <p class="text-sm text-pink-400 mb-2">Request Type: <span id="confirmType"></span></p>
    <p id="sharePreview" class="text-xs text-gray-400 italic text-center max-w-sm mb-2"></p>
    <button onclick="copyShareText()" class="text-xs text-gray-300 underline mb-4">Copy share text</button>
    <p class="text-xs text-gray-500 italic text-center mb-4">Click ‚ÄúShare on ùïè‚Äù to post this automatically.</p>
    <a id="shareOnX" href="#" target="_blank" class="glow-button mb-4">Share on ùïè</a>
    <button onclick="closeConfirmation()" class="glow-button">Close</button>
  </div>
</section>

<!-- Ecosystem Trust Section -->
<section class="py-16 px-6 bg-black text-center border-t border-pink-500">
  <h2 class="text-3xl md:text-4xl neon-text font-bold mb-4">The Ecosystem Is Aligning</h2>
  <p class="text-lg text-gray-400 max-w-2xl mx-auto mb-8">
    $ROAST is now visible in the Crypto.com DeFi Wallet. No import. No guesswork. It‚Äôs real ‚Äî and it‚Äôs recognized.
  </p>
  <div class="flex flex-wrap justify-center gap-6 mb-10">
    <div class="glass-card w-72">
      <h3 class="text-xl font-bold text-white mb-2">Wallet Verified</h3>
      <p class="text-sm text-gray-300 mb-2">ROAST token appears natively in Crypto.com Onchain Wallet.</p>
      <div class="text-green-400 font-mono text-sm">‚úì $ROAST Listed</div>
    </div>
    <div class="glass-card w-72">
      <h3 class="text-xl font-bold text-white mb-2">Dual Token Flow</h3>
      <p class="text-sm text-gray-300 mb-2">Submit in CRO. Get airdropped in Y2K or ROAST.</p>
      <div class="text-pink-400 font-mono text-sm">‚Üí CRO ‚Üí Y2K/ROAST</div>
    </div>
    <div class="glass-card w-72">
      <h3 class="text-xl font-bold text-white mb-2">Live Request Engine</h3>
      <p class="text-sm text-gray-300 mb-2">All submissions are tracked live and fuel the Vault.</p>
      <div class="text-yellow-400 font-mono text-sm">‚úì Synced with Firebase</div>
    </div>
  </div>
  <a href="/airdrops.html" class="glow-button text-lg mt-6 inline-block">Access Airdrop Portal</a>
</section>

<!-- Token Buttons -->
<section class="mt-10 px-6 text-center">
  <div class="flex flex-col md:flex-row justify-center gap-6">
    <a href="https://obsidian.finance/?outputCurrency=0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" target="_blank"
       class="glow-button text-lg">Buy $Y2K</a>
    <a href="https://raydium.io/launchpad/token/?mint=A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray" target="_blank"
       class="glow-button text-lg">Trade $ROAST</a>
  </div>
</section>

<!-- Footer -->
<footer class="relative z-10 py-10 bg-black text-center text-gray-500 text-sm mt-20">
  <div class="mb-4">Built for CROFAM. Fueled by music, memes, and Y2K energy.</div>
  <div class="flex justify-center gap-6 text-white mt-6">
    <a href="https://discord.gg/XxtpYNXX4a" target="_blank" class="hover:text-pink-400 transition">Join Discord</a>
    <a href="https://x.com/y2kc0in?s=21" target="_blank" class="hover:text-pink-400 transition">Follow ùïè</a>
    <a href="https://y2k-the-vault.netlify.app/" target="_blank" class="hover:text-yellow-400 transition">Enter Vault</a>
  </div>
</footer>

<!-- Toast Container -->
<div id="toastContainer" class="fixed bottom-6 right-6 space-y-2 z-50"></div>

  <!-- Firebase Init + Load Submissions -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCLGt0gVlI8BKdrpME4IefwVjF_ehJJmug",
    authDomain: "y2kroast-512ee.firebaseapp.com",
    projectId: "y2kroast-512ee",
    storageBucket: "y2kroast-512ee.appspot.com",
    messagingSenderId: "602588659855",
    appId: "1:602588659855:web:f01efa4b81e737d26270fa"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const liveContainer = document.getElementById('liveRequests');
  const ADMIN_WALLET = "0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100".toLowerCase();
  window.connectedWallet = "";

  let latestTimestampSeen = Date.now(); // Only show toasts for submissions after page load
window.loadSubmissions = () => {
    onSnapshot(collection(db, "studio_requests"), (querySnapshot) => {
      const docs = [];
      querySnapshot.forEach((doc) => {
        docs.push({ id: doc.id, ...doc.data() });
      });

      docs.sort((a, b) => a.timestamp - b.timestamp);
      liveContainer.innerHTML = '';
      if (!window.__loadedIds) window.__loadedIds = new Set();

      docs.forEach((data) => {
        if (data.timestamp > latestTimestampSeen) {
        showToast(`${data.handle} just submitted a ${data.type}`);
        latestTimestampSeen = data.timestamp;
      }
        window.__loadedIds.add(data.id);
        const date = new Date(data.timestamp);
        const formattedDate = date.toLocaleString('en-US', {
          dateStyle: 'medium',
          timeStyle: 'short',
        });

        const item = document.createElement('div');
        item.className = "snap-center bg-black glass-card min-w-[300px] p-4 neon-border text-left";
        const isAdmin = (window.connectedWallet || "").toLowerCase() === ADMIN_WALLET;

        item.innerHTML = `
          <div class="flex justify-between items-center mb-2">
            <div class="text-pink-400 text-sm font-bold">${data.type}</div>
            ${data.limitedMint ? '<div class="text-xs text-white bg-pink-600 px-2 py-1 rounded-full">LIMITED MINT</div>' : ''}
          </div>
          <div class="text-white text-lg mb-1">${data.handle}</div>
          <div class="text-gray-300 text-sm mb-2">${data.notes || 'No notes provided.'}</div>
          <div class="text-xs text-green-400 break-all mb-1">Tx: ${data.txHash.slice(0, 8)}...${data.txHash.slice(-8)}</div>
          <div class="text-xs text-gray-500">${formattedDate}</div>
          ${isAdmin ? `<button onclick="deleteRequest('${data.id}')" class="mt-2 px-3 py-1 bg-red-600 text-xs text-white rounded">Delete</button>` : ''}
        `;
        liveContainer.appendChild(item);
      });
    });
  };

  window.deleteRequest = async function (id) {
    const confirmDelete = confirm("Are you sure you want to delete this submission?");
    if (!confirmDelete) return;

    try {
      await deleteDoc(doc(db, "studio_requests", id));
      showToast("Submission deleted.");
    } catch (err) {
      console.error("Delete Error", err);
      showToast("Failed to delete.");
    }
  };

  window.db = db;
  window.collection = collection;
  window.addDoc = addDoc;
  window.addEventListener("DOMContentLoaded", loadSubmissions);
</script>

<!-- Wallet Connect -->
<script>
let connectedWallet = null;
const CRONOS_MAINNET = {
  chainId: '0x19',
  chainName: 'Cronos Mainnet',
  nativeCurrency: { name: 'CRO', symbol: 'CRO', decimals: 18 },
  rpcUrls: ['https://evm.cronos.org'],
  blockExplorerUrls: ['https://cronoscan.com/']
};

async function connectCRO() {
  try {
    if (!window.ethereum) throw new Error("Install MetaMask or DeFi Wallet.");
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);

    try {
      await window.ethereum.request({
        method: 'wallet_switchEthereumChain',
        params: [{ chainId: CRONOS_MAINNET.chainId }],
      });
    } catch (switchError) {
      if (switchError.code === 4902) {
        await window.ethereum.request({
          method: 'wallet_addEthereumChain',
          params: [CRONOS_MAINNET],
        });
      } else {
        throw switchError;
      }
    }

    croWallet = provider;
    const signer = provider.getSigner();
    const address = await signer.getAddress();
    connectedWallet = address.toLowerCase();
    window.connectedWallet = address.toLowerCase();

    const balance = await provider.getBalance(address);
    document.getElementById('croStatus').innerHTML = `<span class="text-green-400">‚úì</span> CRO: ${address.slice(0,6)}...${address.slice(-4)}`;
    document.getElementById('balanceStatus').textContent = `CRO Balance: ${ethers.utils.formatEther(balance).slice(0,6)} CRO`;

    loadSubmissions();
  } catch (err) {
    console.error("CRO Connect Error", err);
    document.getElementById('croStatus').innerHTML = `<span class="text-red-400">‚úó</span> ${err.message}`;
  }
}

async function sendCRO(amount, toAddress) {
  if (!croWallet) throw new Error("Connect your CRO wallet first.");
  const signer = croWallet.getSigner();
  const tx = await signer.sendTransaction({
    to: toAddress,
    value: ethers.utils.parseEther(amount)
  });
  return tx.hash;
}
</script>

<!-- Submit Logic -->
<script>
async function submitStudioRequest() {
  const type = document.getElementById('requestType').value;
  const handle = document.getElementById('handle').value.trim();
  const notes = document.getElementById('notes').value.trim();
  const limitedMint = document.getElementById('limitedMint').checked;
  const status = document.getElementById('studioStatus');

  if (!type || !handle.startsWith('@')) {
    status.innerHTML = `<span class="text-red-400">Please enter a valid type and handle (@handle).</span>`;
    return;
  }

  try {
    status.innerHTML = `<span class="text-yellow-400">Sending 20 CRO...</span>`;
    const signer = croWallet.getSigner();
    const userAddress = await signer.getAddress();
    const message = `I authorize this ROAST RECORDS request from ${userAddress} at ${new Date().toISOString()}`;
    const signature = await signer.signMessage(message);
    const txHash = await sendCRO("20", "0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100");

    await addDoc(collection(db, "studio_requests"), {
      type,
      handle,
      notes,
      limitedMint,
      txHash,
      croAddress: userAddress,
      message,
      signature,
      timestamp: Date.now()
    });

    status.innerHTML = `<div class="text-green-400">Submitted! Tx: ${txHash}</div>`;
    showConfirmationOverlay(handle, type);
    document.getElementById('submissionForm').reset();
  } catch (err) {
    console.error("Submission Error", err);
    status.innerHTML = `<span class="text-red-400">Error: ${err.message}</span>`;
  }
}
</script>

<!-- Confirmation Logic -->
<script>
function showConfirmationOverlay(handle, type) {
  const overlay = document.getElementById('confirmationOverlay');
  const shareBtn = document.getElementById('shareOnX');
  const preview = document.getElementById('sharePreview');
  const confirmType = document.getElementById('confirmType');

  if (overlay) overlay.classList.remove('hidden');
  if (confirmType) confirmType.textContent = type;

  let templates = [];
  switch (type) {
    case "Roast":
      templates = [
        `I just dropped a roast request inside the Vault. Let the flames begin. #ROASTRECORDS #CROFAM`,
        `Vault roast request submitted. You better hope it ain't about you. #CryptoMusic #Y2K`,
        `I pulled up to ROAST RECORDS with smoke in mind. Submission locked. #CROFAM #Y2KCoin`,
      ];
      break;
    case "Anthem":
    case "Custom Song":
      templates = [
        `Just locked in an anthem request at ROAST RECORDS. Energy incoming. #Y2K #CryptoMusic`,
        `My sound. My story. Vault anthem request submitted. #CROFAM #Y2KCoin`,
        `I just cooked up a custom track submission. This one‚Äôs for the chain. #ROASTRECORDS`,
      ];
      break;
    default:
      templates = [
        `Dropped a creative request at ROAST RECORDS. Skit, intro, or something in-between. #Y2K #CryptoMusic`,
        `Submitted a custom request to the Vault studio. Let‚Äôs see what comes back. #CROFAM #ROASTRECORDS`,
      ];
      break;
  }

  const message = templates[Math.floor(Math.random() * templates.length)];
  const url = `https://y2kcoin.org`;

  if (shareBtn) {
    shareBtn.href = `https://x.com/intent/tweet?text=${encodeURIComponent(message + ' ' + url)}`;
  }
  if (preview) preview.textContent = message;
}
</script>

<!-- Toast + Overlay + Mint Auto Scroll -->
<script>
let toastQueue = [];

function showToast(message) {
  const toastContainer = document.getElementById('toastContainer');
  if (!toastContainer || document.getElementById('enterOverlay')) {
    toastQueue.push(message);
    return;
  }
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.textContent = message;
  toastContainer.appendChild(toast);
  setTimeout(() => toast.remove(), 5000);
}

function enterPortal() {
  const overlay = document.getElementById('enterOverlay');
  if (!overlay) return;
  overlay.style.transition = "opacity 1s ease, transform 1s ease";
  overlay.style.opacity = 0;
  overlay.style.transform = "scale(1.05)";
  setTimeout(() => {
    overlay.remove();
    document.getElementById('portal')?.scrollIntoView({ behavior: 'smooth' });
    if (toastQueue.length) toastQueue.forEach(msg => showToast(msg));
    toastQueue = [];
  }, 1000);
}

function copyShareText() {
  const href = document.getElementById('shareOnX')?.href;
  if (!href) return;
  const text = decodeURIComponent(new URL(href).searchParams.get('text') || '');
  navigator.clipboard.writeText(text);
  showToast("Copied to clipboard.");
}

const mintCarousel = document.getElementById('mintCarousel');
let scrollIndex = 0;
function autoScrollMints() {
  if (!mintCarousel) return;
  const cards = mintCarousel.children;
  if (!cards.length) return;
  scrollIndex = (scrollIndex + 1) % cards.length;
  const cardWidth = cards[0].offsetWidth + 24;
  mintCarousel.scrollTo({ left: scrollIndex * cardWidth, behavior: 'smooth' });
}
setInterval(autoScrollMints, 4000);
</script>

  <!-- Smooth scroll behavior for anchor links -->
<script>
  window.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // Confirmation overlay close handler (if reopened)
    const overlay = document.getElementById('confirmationOverlay');
    const closeBtn = overlay?.querySelector('button.glow-button');
    if (closeBtn) {
      closeBtn.onclick = () => {
        overlay.classList.add('hidden');
      };
    }
  });
</script>

</body>
</html>
  
  
  
