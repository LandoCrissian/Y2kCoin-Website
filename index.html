<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Y2KCoin - A Digital Revolution</title>
    <meta name="description" content="Y2KCoin is a community-driven cryptocurrency blending nostalgia with blockchain innovation.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Orbitron', sans-serif;
            background-color: #0a0a0a;
            color: #e2e8f0;
        }
        .glow-text { text-shadow: 0px 0px 8px cyan; }
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease-in-out;
        }
        .btn-primary { 
            background-color: #00e6e6; 
            color: #0a0a0a; 
            box-shadow: 0 0 20px rgba(0, 230, 230, 0.3);
        }
        .btn-primary:hover { 
            background-color: #009999; 
            transform: translateY(-2px);
        }
        .btn-secondary { 
            background-color: #ff007f; 
            color: #fff; 
            box-shadow: 0 0 20px rgba(255, 0, 127, 0.3);
        }
        .btn-secondary:hover { 
            background-color: #cc0066; 
            transform: translateY(-2px);
        }
        .tab-content {
            display: none;
        }
        .tab-btn.active {
            color: #00e6e6;
            font-weight: bold;
        }
        .input-field {
            background-color: #1a1a1a;
            border: 2px solid #333;
            color: white;
            padding: 12px 16px;
            border-radius: 12px;
            width: 100%;
            transition: all 0.2s ease;
        }
        .input-field:focus {
            border-color: #00e6e6;
            outline: none;
            box-shadow: 0 0 10px rgba(0, 230, 230, 0.2);
        }
        .info-card {
            background-color: #111;
            padding: 24px;
            border-radius: 16px;
            margin: 12px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease;
        }
        .info-card:hover {
            transform: translateY(-2px);
        }
        .loading {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #2d2d2d;
            transition: .3s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #00e6e6;
            box-shadow: 0 0 10px rgba(0, 230, 230, 0.5);
        }
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="flex flex-col items-center text-center px-4 min-h-screen">
    <!-- Header -->
    <header class="w-full py-4 bg-[#0a0a0a]">
        <nav class="flex justify-between items-center max-w-5xl mx-auto">
            <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/52A313DE-90B7-4BFF-A5FD-DDC368B31A0F.jpeg" alt="Y2KCoin Logo" class="w-16">
            <ul class="flex flex-wrap justify-center gap-4">
                <li><button class="tab-btn active" data-tab="about">About</button></li>
                <li><button class="tab-btn" data-tab="mission">Mission</button></li>
                <li><button class="tab-btn" data-tab="marketplace">Marketplace</button></li>
                <li><button class="tab-btn" data-tab="nfts">NFTs</button></li>
                <li><button class="tab-btn" data-tab="staking">Staking</button></li>
                <li><button class="tab-btn" data-tab="gaming">Gaming</button></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="w-full max-w-4xl py-10 flex-grow">
        <!-- Hero Section -->
        <section id="hero" class="mb-10">
            <h1 class="text-4xl sm:text-5xl font-bold glow-text">Welcome to Y2KCoin</h1>
            <p class="text-lg sm:text-xl mt-4 text-gray-300">A digital revolution inspired by the past, built for the future.</p>
            <div class="flex flex-col sm:flex-row justify-center gap-4 mt-6">
                <a href="https://www.puush.fun/coin/0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" class="btn btn-primary">Buy Y2K</a>
                <a href="https://discord.gg/jpFbSapSAh" class="btn btn-secondary">Join Discord</a>
            </div>
        </section>

        <!-- Tab Content -->
        <section id="tab-content" class="mt-8">
            <!-- About Tab -->
            <div id="about" class="tab-content">
                <h2 class="text-3xl font-bold glow-text">About Y2KCoin</h2>
                <p class="mt-4 text-gray-400">Y2KCoin merges nostalgia with Web3 innovation. Stake, earn, and trade digital assets in a retro-inspired metaverse.</p>
            </div>

            <!-- Mission Tab -->
            <div id="mission" class="tab-content">
                <h2 class="text-3xl font-bold glow-text">Our Mission</h2>
                <p class="mt-4 text-gray-400">We aim to build an engaging, sustainable digital ecosystem where holders benefit from staking, NFTs, and gaming.</p>
            </div>

            <!-- Marketplace Tab -->
            <div id="marketplace" class="tab-content">
                <h2 class="text-3xl font-bold glow-text">Y2K Marketplace</h2>
                <p class="mt-4 text-gray-400">A decentralized marketplace where users can trade and collect Y2K digital assets.</p>
            </div>

            <!-- NFTs Tab -->
            <div id="nfts" class="tab-content">
                <h2 class="text-3xl font-bold glow-text">Y2K NFTs</h2>
                <p class="mt-4 text-gray-400">Limited edition, community-driven digital collectibles with real utility.</p>
            </div>
                        <!-- Staking Tab -->
            <div id="staking" class="tab-content">
                <h2 class="text-3xl font-bold glow-text mb-6">Y2K Staking Dashboard</h2>
                
                <!-- Wallet Connection -->
                <div id="wallet-section" class="mb-8">
                    <button id="connect-wallet" class="btn btn-primary">Connect Wallet</button>
                    <button id="disconnect-wallet" class="btn btn-secondary hidden">Disconnect Wallet</button>
                    <div id="network-info" class="mt-4 hidden">
                        <p class="text-lg">Connected Wallet: <span id="wallet-address" class="font-mono text-cyan-400"></span></p>
                        <p class="text-lg">Network: <span id="network-name" class="text-cyan-400">Not Connected</span></p>
                    </div>
                </div>

                <!-- Main Staking Interface - Hidden until wallet connected -->
                <div id="staking-interface" class="hidden">
                    <!-- Token Balances -->
                    <div class="info-card mb-8">
                        <h3 class="text-xl font-bold text-cyan-400 mb-4">Your Balances</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-lg">Y2K Balance: <span id="y2k-balance" class="font-mono text-cyan-400">0</span></p>
                                <p class="text-lg">POGS Balance: <span id="pogs-balance" class="font-mono text-cyan-400">0</span></p>
                            </div>
                            <div>
                                <p class="text-lg">Staked Y2K: <span id="staked-amount" class="font-mono text-cyan-400">0</span></p>
                                <p class="text-lg">Pending Rewards: <span id="pending-rewards" class="font-mono text-cyan-400">0</span></p>
                            </div>
                        </div>
                    </div>

                    <!-- Staking Actions -->
                    <div class="info-card mb-8">
                        <h3 class="text-xl font-bold text-cyan-400 mb-4">Stake/Unstake</h3>
                        <div class="max-w-md mx-auto">
                            <div class="relative mb-4">
                                <input type="number" 
                                       id="stake-amount" 
                                       placeholder="Enter amount" 
                                       class="input-field"
                                       min="0" 
                                       step="any">
                                <button id="max-button" 
                                        class="absolute right-4 top-1/2 transform -translate-y-1/2 text-sm text-cyan-400 hover:text-cyan-300">
                                    MAX
                                </button>
                            </div>
                            <input type="text" 
                                   id="referral-address" 
                                   placeholder="Referral Address (optional)" 
                                   class="input-field mb-4">
                            <div class="flex flex-wrap justify-center gap-4">
                                <button id="approve-button" class="btn btn-primary">Approve Y2K</button>
                                <button id="stake-button" class="btn btn-primary">Stake</button>
                                <button id="unstake-button" class="btn btn-secondary">Unstake</button>
                            </div>
                        </div>
                    </div>

                    <!-- Rewards Section -->
                    <div class="info-card mb-8">
                        <h3 class="text-xl font-bold text-cyan-400 mb-4">Rewards</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                            <div>
                                <p class="text-lg">Claimable POGS: <span id="claimable-rewards" class="font-mono text-cyan-400">0</span></p>
                                <p class="text-lg">Last Claim: <span id="last-claim-time" class="font-mono text-cyan-400">Never</span></p>
                            </div>
                            <div>
                                <p class="text-lg">Referral Rewards: <span id="referral-rewards" class="font-mono text-cyan-400">0</span></p>
                                <p class="text-lg">Total Referred: <span id="total-referrals" class="font-mono text-cyan-400">0</span></p>
                            </div>
                        </div>
                        <button id="claim-rewards" class="btn btn-primary">Claim Rewards</button>
                    </div>

                    <!-- Staking Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div class="info-card">
                            <h3 class="text-xl font-bold text-cyan-400 mb-4">Your Staking Info</h3>
                            <p class="text-lg">Staking Since: <span id="staking-time" class="font-mono text-cyan-400">-</span></p>
                            <p class="text-lg">Lock Period: <span id="lock-period" class="font-mono text-cyan-400">-</span></p>
                            <p class="text-lg">Next Unlock: <span id="next-unlock" class="font-mono text-cyan-400">-</span></p>
                        </div>
                        <div class="info-card">
                            <h3 class="text-xl font-bold text-cyan-400 mb-4">Protocol Stats</h3>
                            <p class="text-lg">APR: <span id="current-apr" class="font-mono text-cyan-400">0%</span></p>
                            <p class="text-lg">Total Staked: <span id="total-staked" class="font-mono text-cyan-400">0</span></p>
                            <p class="text-lg">Burn Rate: <span id="burn-rate" class="font-mono text-cyan-400">0%</span></p>
                        </div>
                    </div>

                    <!-- Features Toggle -->
                    <div class="info-card">
                        <h3 class="text-xl font-bold text-cyan-400 mb-4">Features</h3>
                        <div class="flex flex-wrap justify-center gap-12">
                            <div class="flex items-center">
                                <label class="text-lg mr-3">Auto-Compound</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="auto-compound-toggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="flex items-center">
                                <label class="text-lg mr-3">Lottery Entry</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="lottery-toggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transaction Status -->
                <div id="tx-status" class="fixed bottom-4 right-4 hidden">
                    <div class="bg-black border border-cyan-400 rounded-lg p-4 shadow-lg">
                        <p id="tx-message" class="text-cyan-400"></p>
                    </div>
                </div>
            </div>

            <!-- Gaming Tab -->
            <div id="gaming" class="tab-content">
                <h2 class="text-3xl font-bold glow-text">Y2K Gaming</h2>
                <p class="mt-4 text-gray-400">An immersive gaming experience that rewards players through blockchain mechanics.</p>
            </div>
        </section>
    </main>
        <!-- Footer -->
    <footer class="w-full py-6 bg-[#0a0a0a]">
        <section id="social-links" class="mb-6">
            <h2 class="text-2xl font-bold glow-text">Follow Us</h2>
            <div class="flex justify-center gap-4 mt-4">
                <a href="https://x.com/y2kc0in?s=21" target="_blank" class="btn btn-primary">ùïè</a>
                <a href="https://www.instagram.com/y2kcoin" target="_blank" class="btn btn-primary">Instagram</a>
                <a href="https://www.reddit.com/r/Y2KCoin/s/0Lk00ZsGCz" target="_blank" class="btn btn-primary">Reddit</a>
            </div>
        </section>
        <p>&copy; 2025 Y2KCoin. All rights reserved.</p>
    </footer>

    <!-- JavaScript -->
    <script>
        // Contract ABI - Add your full ABI here
        const CONTRACT_ABI = [{"inputs":[{"internalType":"address","name":"_y2kToken","type":"address"},{"internalType":"address","name":"_pogsToken","type":"address"},{"internalType":"uint256","name":"_rewardRate","type":"uint256"},{"internalType":"address","name":"_treasury","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"SafeERC20FailedOperation","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"status","type":"bool"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"AutoCompoundingToggled","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newRate","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"BurnRateUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"status","type":"bool"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"LotteryToggled","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"winner","type":"address"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"roundId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"LotteryWinner","type":"event"}];

        // Contract Constants
        const CONTRACT_ADDRESS = "0x7DC6a9900e9DE69fF36ECb7dF56aA7c9157DE483";
        const CRONOS_NETWORK_CONFIG = {
            chainId: '0x19',
            chainName: 'Cronos Mainnet',
            nativeCurrency: {
                name: 'CRO',
                symbol: 'CRO',
                decimals: 18
            },
            rpcUrls: ['https://evm.cronos.org'],
            blockExplorerUrls: ['https://cronoscan.com/']
        };

        let contract;
        let signer;
        let provider;

        // Tab Switching Logic
        document.addEventListener("DOMContentLoaded", () => {
            const tabButtons = document.querySelectorAll(".tab-btn");
            const tabContents = document.querySelectorAll(".tab-content");

            function showTab(tabId) {
                tabContents.forEach(content => {
                    content.style.display = 'none';
                });

                tabButtons.forEach(btn => {
                    btn.classList.remove('active');
                });

                const selectedTab = document.getElementById(tabId);
                if (selectedTab) {
                    selectedTab.style.display = 'block';
                }

                const activeButton = document.querySelector(`[data-tab="${tabId}"]`);
                if (activeButton) {
                    activeButton.classList.add('active');
                }
            }

            tabButtons.forEach(button => {
                button.addEventListener("click", (e) => {
                    e.preventDefault();
                    const tabId = button.getAttribute("data-tab");
                    showTab(tabId);
                });
            });

            // Show initial tab
            showTab('about');
        });

        async function switchToCronosNetwork() {
            try {
                await window.ethereum.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: CRONOS_NETWORK_CONFIG.chainId }],
                });
            } catch (switchError) {
                if (switchError.code === 4902) {
                    try {
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [CRONOS_NETWORK_CONFIG],
                        });
                    } catch (addError) {
                        console.error('Failed to add Cronos network:', addError);
                        showError('Failed to add Cronos network');
                    }
                }
            }
        }

        async function connectWallet() {
            try {
                if (typeof window.ethereum === 'undefined') {
                    alert('Please install MetaMask to use the staking feature');
                    return;
                }

                const loadingBtn = document.getElementById("connect-wallet");
                loadingBtn.textContent = 'Connecting...';
                
                await switchToCronosNetwork();
                
                provider = new ethers.providers.Web3Provider(window.ethereum);
                await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                
                contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);
                
                const address = await signer.getAddress();
                
                document.getElementById("wallet-address").textContent = 
                    `${address.substring(0, 6)}...${address.substring(38)}`;
                document.getElementById("network-info").classList.remove('hidden');
                document.getElementById("connect-wallet").classList.add('hidden');
                document.getElementById("disconnect-wallet").classList.remove('hidden');
                document.getElementById("staking-interface").classList.remove('hidden');
                
                await updateUI();
                setupEventListeners();
                
            } catch (error) {
                console.error("Error connecting wallet:", error);
                showError("Failed to connect wallet: " + error.message);
            } finally {
                const loadingBtn = document.getElementById("connect-wallet");
                loadingBtn.textContent = 'Connect Wallet';
            }
        }

        async function updateUI() {
            if (!contract || !signer) return;

            try {
                const address = await signer.getAddress();
                
                // Get stake info
                const stakeInfo = await contract.stakes(address);
                document.getElementById("staked-amount").textContent = 
                    ethers.utils.formatEther(stakeInfo.amount);
                
                if (stakeInfo.startTime.gt(0)) {
                    const stakingDate = new Date(stakeInfo.startTime.mul(1000).toNumber());
                    document.getElementById("staking-time").textContent = stakingDate.toLocaleDateString();
                }

                // Get token balances
                const y2kToken = new ethers.Contract(
                    await contract.y2kToken(),
                    ["function balanceOf(address) view returns (uint256)"],
                    signer
                );
                const pogsToken = new ethers.Contract(
                    await contract.pogsToken(),
                    ["function balanceOf(address) view returns (uint256)"],
                    signer
                );

                const y2kBalance = await y2kToken.balanceOf(address);
                const pogsBalance = await pogsToken.balanceOf(address);

                document.getElementById("y2k-balance").textContent = 
                    ethers.utils.formatEther(y2kBalance);
                document.getElementById("pogs-balance").textContent = 
                    ethers.utils.formatEther(pogsBalance);

                // Update other UI elements
                const referralRewards = await contract.referralRewards(address);
                document.getElementById("referral-rewards").textContent = 
                    ethers.utils.formatEther(referralRewards);

                const burnRate = await contract.burnRate();
                document.getElementById("burn-rate").textContent = 
                    burnRate.toString() + "%";

            } catch (error) {
                console.error("Error updating UI:", error);
                showError("Failed to update information");
            }
        }

        function setupEventListeners() {
            document.getElementById("stake-button").addEventListener("click", stake);
            document.getElementById("unstake-button").addEventListener("click", unstake);
            document.getElementById("claim-rewards").addEventListener("click", claimRewards);
            document.getElementById("approve-button").addEventListener("click", approveTokens);
            
            document.getElementById("max-button").addEventListener("click", async () => {
                if (!contract || !signer) return;
                
                try {
                    const y2kToken = new ethers.Contract(
                        await contract.y2kToken(),
                        ["function balanceOf(address) view returns (uint256)"],
                        signer
                    );
                    
                    const balance = await y2kToken.balanceOf(await signer.getAddress());
                    document.getElementById("stake-amount").value = ethers.utils.formatEther(balance);
                } catch (error) {
                    console.error("Error setting max amount:", error);
                    showError("Failed to set maximum amount");
                }
            });
        }

        async function approveTokens() {
            if (!contract || !signer) return;
            
            try {
                const amount = document.getElementById("stake-amount").value;
                const amountWei = ethers.utils.parseEther(amount);
                
                const y2kToken = new ethers.Contract(
                    await contract.y2kToken(),
                    ["function approve(address spender, uint256 amount) public returns (bool)"],
                    signer
                );
                
                const tx = await y2kToken.approve(CONTRACT_ADDRESS, amountWei);
                showStatus("Approving tokens...");
                await tx.wait();
                showStatus("Tokens approved successfully!");
            } catch (error) {
                console.error("Approval error:", error);
                showError("Failed to approve tokens");
            }
        }

        async function stake() {
            if (!contract || !signer) return;
            
            try {
                const amount = document.getElementById("stake-amount").value;
                const referralAddress = document.getElementById("referral-address").value;
                const amountWei = ethers.utils.parseEther(amount);
                
                const tx = await contract.stake(
                    amountWei,
                    referralAddress || ethers.constants.AddressZero
                );
                showStatus("Staking tokens...");
                await tx.wait();
                showStatus("Tokens staked successfully!");
                await updateUI();
            } catch (error) {
                console.error("Staking error:", error);
                showError("Failed to stake tokens");
            }
        }

        async function unstake() {
            if (!contract || !signer) return;
            
            try {
                const amount = document.getElementById("stake-amount").value;
                const amountWei = ethers.utils.parseEther(amount);
                
                const tx = await contract.unstake(amountWei);
                showStatus("Unstaking tokens...");
                await tx.wait();
                showStatus("Tokens unstaked successfully!");
                await updateUI();
            } catch (error) {
                console.error("Unstaking error:", error);
                showError("Failed to unstake tokens");
            }
        }

        async function claimRewards() {
            if (!contract || !signer) return;
            
            try {
                const tx = await contract.claimReward();
                showStatus("Claiming rewards...");
                await tx.wait();
                showStatus("Rewards claimed successfully!");
                await updateUI();
            } catch (error) {
                console.error("Claim error:", error);
                showError("Failed to claim rewards");
            }
        }

        function showStatus(message) {
            const statusEl = document.getElementById("tx-status");
            const messageEl = document.getElementById("tx-message");
            messageEl.textContent = message;
            statusEl.classList.remove('hidden');
            setTimeout(() => {
                statusEl.classList.add('hidden');
            }, 5000);
        }

        function showError(message) {
            showStatus("Error: " + message);
        }

        // Event Listeners
        document.getElementById("connect-wallet")?.addEventListener("click", connectWallet);
        
        // Update UI periodically
        setInterval(updateUI, 30000);
    </script>
</body>
</html>
