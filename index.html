<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <title>Y2K | ROAST RECORDS</title>
  <meta name="description" content="The CROFAM music studio. Submit a request, fund the ecosystem, own the moment.">
  <meta name="theme-color" content="#0a0a0a" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    :root { 
      color-scheme: dark; 
      --accent: #ff00ff;
    }
    html { 
      background-color: #0a0a0a;
    }
    body {
      color: #e2e8f0;
      font-family: 'Rubik', sans-serif;
      overflow-x: hidden;
    }
    #particleCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }
    .neon-text {
      font-family: 'Orbitron', sans-serif;
      text-shadow: 0 0 5px var(--accent), 0 0 10px var(--accent);
    }
    .neon-border {
      border: 2px solid var(--accent);
      box-shadow: 0 0 10px var(--accent);
      border-radius: 10px;
    }
    .glow-button {
  padding: 0.75rem 1.5rem;
  border: 1px solid var(--accent);
  background: rgba(255, 0, 255, 0.1);
  color: white;
  border-radius: 8px;
  font-weight: bold;
  transition: all 0.3s ease;
  cursor: pointer;
  text-align: center;
  display: inline-block;
  width: auto;
  min-width: 200px;
}

.glow-button:hover,
.glow-button:active {
  background: rgba(255, 0, 255, 0.2);
  box-shadow: 0 0 20px var(--accent);
  transform: translateY(-2px);
}
    .glass-card {
      background: rgba(255, 255, 255, 0.04);
      backdrop-filter: blur(12px);
      border-radius: 14px;
      padding: 1.25rem;
    }
    .portal-ring {
  position: absolute;
  border: 2px solid var(--accent);
  border-radius: 50%;
  animation: portalPulse 2s infinite;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
}
.portal-ring:nth-child(1) { width: 200px; height: 200px; animation-delay: 0s; }
.portal-ring:nth-child(2) { width: 160px; height: 160px; animation-delay: -0.5s; }
.portal-ring:nth-child(3) { width: 120px; height: 120px; animation-delay: -1s; }

@keyframes portalPulse {
  0% { transform: translate(-50%, -50%) scale(0.95); opacity: 0.5; }
  50% { transform: translate(-50%, -50%) scale(1.05); opacity: 1; }
  100% { transform: translate(-50%, -50%) scale(0.95); opacity: 0.5; }
}
    @keyframes spin {
      0% { transform: rotate(0); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
  
<body class="bg-black text-white font-sans overflow-x-hidden relative">
  <canvas id="particleCanvas"></canvas>

  <!-- Portal Entry Overlay -->
  <div id="portalEntry" class="fixed inset-0 bg-black bg-opacity-90 flex flex-col justify-center items-center z-50 px-4">
    <div class="relative mb-8 flex justify-center items-center">
      <div class="portal-ring absolute"></div>
      <div class="portal-ring absolute"></div>
      <div class="portal-ring absolute"></div>
      <div class="w-32 h-32 rounded-full neon-border"
        style="background: url('https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/IMG_5445.jpeg') center/cover; animation: spin 14s linear infinite;">
      </div>
    </div>
    <h1 class="text-4xl neon-text font-bold mb-6 text-center">Welcome to Y2K</h1>
    <button onclick="enterPortal()" class="glow-button text-xl w-full max-w-xs text-center">Initialize Connection</button>
  </div>

  <!-- CROFAM Trust Strip -->
  <div class="fixed top-0 left-0 w-full z-40 text-center text-xs sm:text-sm py-2 bg-gradient-to-r from-pink-500 via-fuchsia-600 to-purple-700 text-white font-semibold tracking-wide shadow-md">
    CROFAM Verified ‚Ä¢ Fueled by $Y2K and $ROAST
  </div>

  <!-- Main Content -->
  <div id="mainContent" class="hidden pt-24 relative z-10">

    <!-- Spinning Emblem -->
    <section class="flex flex-col items-center justify-center px-4 pt-6 pb-10">
      <div class="w-32 h-32 rounded-full neon-border mb-6"
           style="background: url('https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/IMG_5445.jpeg') center/cover; animation: spin 14s linear infinite;">
      </div>
    </section>

    <!-- Action Button Grid -->
    <section class="px-4 pb-12 max-w-md mx-auto grid grid-cols-2 gap-4">
      <a href="#studio" class="glow-button text-sm flex items-center justify-center gap-2">üéôÔ∏è Studio</a>
      <a href="/airdrops.html" class="glow-button text-sm flex items-center justify-center gap-2">üéÅ Airdrops</a>
      <a href="https://obsidian.finance/?outputCurrency=0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" target="_blank" class="glow-button text-sm flex items-center justify-center gap-2">üü£ Buy $Y2K</a>
      <a href="https://raydium.io/launchpad/token/?mint=A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray" target="_blank" class="glow-button text-sm flex items-center justify-center gap-2">üî• Trade $ROAST</a>
    </section>

  </div>
</body>

      <!-- ROAST RECORDS Form Section -->
<section id="studio" class="px-4 pb-20">
  <h2 class="text-3xl neon-text font-bold text-center mb-6">ROAST RECORDS</h2>

  <div class="flex justify-center mb-2">
  <button onclick="connectWallet()" class="glow-button text-sm w-full max-w-xs">Connect Wallet</button>
</div>
<div id="walletStatus" class="text-center text-sm text-green-400 mt-2"></div>

    <form id="submissionForm" class="space-y-4">
      <select id="requestType" required class="w-full p-3 neon-border bg-black text-white text-sm text-center rounded">
        <option value="">Select Type</option>
        <option value="Anthem">Anthem / Theme</option>
        <option value="Custom">Custom Song</option>
        <option value="Roast">Roast</option>
        <option value="Other">Intro / Skit</option>
      </select>

      <input type="text" id="handle" placeholder="@YourHandle" required
             class="w-full p-3 neon-border bg-black text-white text-center rounded text-sm"/>

      <textarea id="notes" placeholder="Describe your request..."
                class="w-full p-3 neon-border bg-black text-white rounded text-sm h-28 resize-none"></textarea>

      <label class="flex items-center gap-3 text-white text-sm">
        <input type="checkbox" id="limitedMint" class="accent-pink-500 w-5 h-5"/>
        <span>Request Limited Mint (10 editions at 50 CRO each)</span>
      </label>

      <button type="button" onclick="submitStudioRequest()" class="w-full glow-button text-sm">
        Submit Request (20 CRO)
      </button>
    </form>

    <div id="studioStatus" class="text-center text-sm pt-2"></div>
  </div>
</section>

  <!-- Confirmation Share Overlay -->
<div id="confirmationOverlay" class="fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col justify-center items-center px-4 text-center hidden">
  <div class="glass-card neon-border w-full max-w-md p-6 space-y-4">
    <h3 class="text-xl font-bold neon-text">Submission Confirmed</h3>
    <p class="text-sm text-gray-300">Let the world know what you submitted.</p>
    <div class="text-sm bg-black text-white p-3 rounded neon-border" id="sharePreview"></div>
    <a id="shareOnX" href="#" target="_blank" class="glow-button text-sm w-full">Share on ùïè</a>
    <button onclick="copyShareText()" class="glow-button text-sm w-full">Copy Text</button>
    <button onclick="closeConfirmationOverlay()" class="glow-button text-sm w-full">Close</button>
  </div>
</div>

  <!-- Live Submissions Section -->
<section id="live" class="px-4 pt-12 pb-20 bg-[#0b0b0b] text-center">
  <h2 class="text-3xl md:text-4xl neon-text font-bold mb-2">Live Submissions</h2>
  <p class="text-sm text-gray-400 italic mb-6">Updated in real time. All requests are verified and chain-linked.</p>

  <div id="liveRequests" class="flex overflow-x-auto snap-x snap-mandatory gap-4 px-1 pb-2 scroll-smooth max-w-full">
    <!-- Submissions will auto-populate here -->
  </div>
</section>

      <!-- Mints Section -->
      <section id="mints" class="px-4 py-6">
        <h2 class="text-2xl neon-text font-bold mb-4 text-center">Live Mints</h2>
        <div class="overflow-x-auto">
          <div class="flex gap-3 pb-4" style="width: max-content;">
            <a href="https://eric-mode-business-boomin.nfts2.me/" target="_blank" class="glass-card w-64">
              <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5510.jpeg" alt="Eric" class="w-full rounded mb-2"/>
              <h3 class="font-bold">ERIC</h3>
              <p class="text-xs text-gray-400">The original anthem</p>
            </a>
            <a href="https://cronoshadow.nfts2.me/" target="_blank" class="glass-card w-64">
              <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5403.jpeg" alt="Cards" class="w-full rounded mb-2"/>
              <h3 class="font-bold">Cards of Cronos</h3>
              <p class="text-xs text-gray-400">Your on-chain fate</p>
            </a>
            <a href="https://dojo-warriors-anthem.nfts2.me/" target="_blank" class="glass-card w-64">
              <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5285.jpeg" alt="DOJO" class="w-full rounded mb-2"/>
              <h3 class="font-bold">DOJO</h3>
              <p class="text-xs text-gray-400">Discipline & chaos</p>
            </a>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="py-6 text-center text-xs text-gray-500">
        <div class="mb-3">Built for CROFAM ‚Ä¢ Fueled by Y2K energy</div>
        <div class="flex justify-center gap-4 text-white">
          <a href="https://discord.gg/XxtpYNXX4a" target="_blank" class="hover:text-pink-400">Discord</a>
          <a href="https://x.com/y2kc0in?s=21" target="_blank" class="hover:text-pink-400">ùïè</a>
          <a href="https://y2k-the-vault.netlify.app/" target="_blank" class="hover:text-pink-400">Vault</a>
        </div>
      </footer>
    </main>
  </div>

<!-- Toast Container -->
<div id="toastContainer" class="fixed bottom-6 right-6 space-y-2 z-50"></div>

  <!-- Firebase Init + Load Submissions -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCLGt0gVlI8BKdrpME4IefwVjF_ehJJmug",
    authDomain: "y2kroast-512ee.firebaseapp.com",
    projectId: "y2kroast-512ee",
    storageBucket: "y2kroast-512ee.appspot.com",
    messagingSenderId: "602588659855",
    appId: "1:602588659855:web:f01efa4b81e737d26270fa"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const liveContainer = document.getElementById('liveRequests');
  const ADMIN_WALLET = "0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100".toLowerCase();
  window.connectedWallet = "";

  let latestTimestampSeen = Date.now(); // Only show toasts for submissions after page load
window.loadSubmissions = () => {
  onSnapshot(collection(db, "studio_requests"), (querySnapshot) => {
    const docs = [];
    querySnapshot.forEach((doc) => {
      docs.push({ id: doc.id, ...doc.data() });
    });

    docs.sort((a, b) => b.timestamp - a.timestamp); // newest first
    liveContainer.innerHTML = '';
    if (!window.__loadedIds) window.__loadedIds = new Set();

    docs.forEach((data) => {
      window.__loadedIds.add(data.id);
      const date = new Date(data.timestamp);
      const formattedDate = date.toLocaleString('en-US', {
        dateStyle: 'medium',
        timeStyle: 'short',
      });

      const item = document.createElement('div');
      item.className = "snap-center min-w-[280px] glass-card neon-border text-left p-4 bg-black";
      const isAdmin = (window.connectedWallet || "").toLowerCase() === ADMIN_WALLET;

      item.innerHTML = `
        <div class="flex justify-between items-center mb-2">
          <div class="text-pink-400 text-sm font-bold">${data.type}</div>
          ${data.limitedMint ? '<div class="text-xs bg-pink-600 px-2 py-1 rounded-full text-white">LIMITED</div>' : ''}
        </div>
        <div class="text-white font-bold text-lg mb-1">${data.handle}</div>
        <p class="text-gray-300 text-sm mb-2">${data.notes || 'No notes provided.'}</p>
        <p class="text-xs text-green-400 break-all mb-1">Tx: ${data.txHash.slice(0, 8)}...${data.txHash.slice(-8)}</p>
        <p class="text-xs text-gray-500">${formattedDate}</p>
        ${isAdmin ? `
          <div class="mt-4 flex justify-between">
            <button onclick="deleteRequest('${data.id}')" class="px-3 py-1 text-xs bg-red-600 text-white rounded">Delete</button>
            <button onclick="stampSubmission('${data.id}')" class="px-3 py-1 text-xs bg-green-500 text-black rounded">Stamp</button>
          </div>
        ` : ''}
      `;

      liveContainer.appendChild(item);
    });
  });
};

  window.deleteRequest = async function (id) {
    const confirmDelete = confirm("Are you sure you want to delete this submission?");
    if (!confirmDelete) return;

    try {
      await deleteDoc(doc(db, "studio_requests", id));
      showToast("Submission deleted.");
    } catch (err) {
      console.error("Delete Error", err);
      showToast("Failed to delete.");
    }
  };

  window.db = db;
  window.collection = collection;
  window.addDoc = addDoc;
  window.addEventListener("DOMContentLoaded", loadSubmissions);

  window.stampSubmission = async function (id) {
  try {
    const stampedRef = doc(db, "studio_requests", id);
    await addDoc(collection(db, "stamped_requests"), {
      ...(await (await getDoc(stampedRef)).data()),
      stampedAt: Date.now()
    });
    await deleteDoc(stampedRef);
    showToast("Submission stamped & moved.");
  } catch (err) {
    console.error("Stamp Error", err);
    showToast("Failed to stamp submission.");
  }
};
  
</script>
  

<!-- Wallet Connect -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
<script>
let croProvider = null;

async function connectWallet() {
  try {
    if (!window.ethereum) throw new Error("MetaMask or Crypto.com DeFi Wallet not found.");

    croProvider = new ethers.providers.Web3Provider(window.ethereum); // assign FIRST
    await croProvider.send("eth_requestAccounts", []);
    const signer = croProvider.getSigner();
    const address = await signer.getAddress();

    window.connectedWallet = address.toLowerCase();

    const balance = await croProvider.getBalance(address);
    const formattedBalance = ethers.utils.formatEther(balance).slice(0, 6);

    document.getElementById('walletStatus').innerHTML =
      `Connected: ${address.slice(0, 6)}...${address.slice(-4)} (${formattedBalance} CRO)`;

    loadSubmissions();
  } catch (err) {
    console.error("Wallet Connect Error", err);
    document.getElementById('walletStatus').innerHTML =
      `<span class="text-red-400">‚úó ${err.message}</span>`;
  }
}

async function sendCRO(amount, toAddress) {
  if (!croProvider) throw new Error("Please connect your CRO wallet first.");
  const signer = croProvider.getSigner();
  const tx = await signer.sendTransaction({
    to: toAddress,
    value: ethers.utils.parseEther(amount)
  });
  return tx.hash;
}
</script>

<!-- Submit Logic -->
<script>
async function submitStudioRequest() {
  const type = document.getElementById('requestType').value;
  const handle = document.getElementById('handle').value.trim();
  const notes = document.getElementById('notes').value.trim();
  const limitedMint = document.getElementById('limitedMint').checked;
  const status = document.getElementById('studioStatus');

  if (!type || !handle.startsWith('@')) {
    status.innerHTML = `<span class="text-red-400">Please enter a valid type and handle (@handle).</span>`;
    return;
  }

  try {
    status.innerHTML = `<span class="text-yellow-400">Sending 20 CRO...</span>`;
    const signer = croProvider.getSigner(); // ‚úÖ Use this instead
    const userAddress = await signer.getAddress();
    const message = `I authorize this ROAST RECORDS request from ${userAddress} at ${new Date().toISOString()}`;
    const signature = await signer.signMessage(message);
    const txHash = await sendCRO("20", "0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100");

    await addDoc(collection(db, "studio_requests"), {
      type,
      handle,
      notes,
      limitedMint,
      txHash,
      croAddress: userAddress,
      message,
      signature,
      timestamp: Date.now()
    });

    status.innerHTML = `<div class="text-green-400">Submitted! Tx: ${txHash}</div>`;
    showConfirmationOverlay(handle, type);
    document.getElementById('submissionForm').reset();
  } catch (err) {
    console.error("Submission Error", err);
    status.innerHTML = `<span class="text-red-400">Error: ${err.message}</span>`;
  }
}
</script>

<!-- Confirmation Logic -->
<script>
function showConfirmationOverlay(handle, type) {
  const overlay = document.getElementById('confirmationOverlay');
  const shareBtn = document.getElementById('shareOnX');
  const preview = document.getElementById('sharePreview');

  if (overlay) overlay.classList.remove('hidden');

  const hashtags = {
    Roast: ["#ROASTRECORDS", "#CROFAM", "#CryptoMusic"],
    Anthem: ["#Y2KCoin", "#CROFAM", "#CryptoMusic"],
    Custom: ["#ROASTRECORDS", "#Y2K", "#ChainSound"],
    Other: ["#Y2KCoin", "#VaultStudio", "#CROFAM"]
  };

  const templates = {
    Roast: [
      `I just dropped a roast request inside the Vault. Let the flames begin.`,
      `Vault roast request submitted. You better hope it ain't about you.`,
      `I pulled up to ROAST RECORDS with smoke in mind. Submission locked.`
    ],
    Anthem: [
      `Just locked in an anthem request at ROAST RECORDS. Energy incoming.`,
      `My sound. My story. Vault anthem request submitted.`,
      `Anthem request submitted. Soundtrack for the chain activated.`
    ],
    Custom: [
      `I just cooked up a custom track submission. This one‚Äôs for the chain.`,
      `Custom song request locked inside ROAST RECORDS.`,
      `Submitted a fully personalized track request. Vault studio active.`
    ],
    Other: [
      `Dropped a creative request at ROAST RECORDS. Skit, intro, or something in-between.`,
      `Intro/Skit request submitted. Vault creativity unleashed.`,
      `Just added some flavor to the chain. Custom intro/skit request submitted.`
    ]
  };

  const selectedType = type === "Roast" ? "Roast"
                     : type === "Anthem" ? "Anthem"
                     : type === "Custom Song" ? "Custom"
                     : "Other";

  const text = templates[selectedType][Math.floor(Math.random() * templates[selectedType].length)];
  const tags = hashtags[selectedType].slice(0, 3).join(" ");
  const url = "https://y2kcoin.org";

  const finalPost = `${text} ${tags} ${url}`;

  if (shareBtn) {
    shareBtn.href = `https://x.com/intent/tweet?text=${encodeURIComponent(finalPost)}`;
    shareBtn.setAttribute("data-text", finalPost);
  }

  if (preview) preview.textContent = finalPost;
}
</script>

  <script>
function copyShareText() {
  const shareBtn = document.getElementById('shareOnX');
  if (!shareBtn) return;

  const text = shareBtn.getAttribute('data-text') || '';
  navigator.clipboard.writeText(text)
    .then(() => showToast("Copied to clipboard."))
    .catch(() => showToast("Copy failed."));
}

function closeConfirmationOverlay() {
  const overlay = document.getElementById('confirmationOverlay');
  if (overlay) overlay.classList.add('hidden');
}
</script>

<!-- Toast + Overlay + Mint Auto Scroll -->
<script>
let toastQueue = [];

function showToast(message) {
  const toastContainer = document.getElementById('toastContainer');
  if (!toastContainer || document.getElementById('enterOverlay')) {
    toastQueue.push(message);
    return;
  }
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.textContent = message;
  toastContainer.appendChild(toast);
  setTimeout(() => toast.remove(), 5000);
}

function enterPortal() {
  const overlay = document.getElementById('enterOverlay');
  if (!overlay) return;
  
  gsap.to(overlay, {
    opacity: 0,
    duration: 1,
    ease: "power2.inOut",
    onComplete: () => {
      overlay.remove();
      if (toastQueue.length) {
        toastQueue.forEach(msg => showToast(msg));
        toastQueue = [];
      }
    }
  });

  gsap.to('.portal-container', {
    scale: 1.5,
    opacity: 0,
    duration: 1,
    ease: "power2.in"
  });
}

function copyShareText() {
  const href = document.getElementById('shareOnX')?.href;
  if (!href) return;
  const text = decodeURIComponent(new URL(href).searchParams.get('text') || '');
  navigator.clipboard.writeText(text);
  showToast("Copied to clipboard.");
}

const mintCarousel = document.getElementById('mintCarousel');
let scrollIndex = 0;
function autoScrollMints() {
  if (!mintCarousel) return;
  const cards = mintCarousel.children;
  if (!cards.length) return;
  scrollIndex = (scrollIndex + 1) % cards.length;
  const cardWidth = cards[0].offsetWidth + 24;
  mintCarousel.scrollTo({ left: scrollIndex * cardWidth, behavior: 'smooth' });
}
setInterval(autoScrollMints, 4000);
</script>

  <!-- Smooth scroll behavior for anchor links -->
<script>
  window.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) target.scrollIntoView({ behavior: 'smooth' });
      });
    });

    // Confirmation overlay close handler (if reopened)
    const overlay = document.getElementById('confirmationOverlay');
    const closeBtn = overlay?.querySelector('button.glow-button');
    if (closeBtn) {
      closeBtn.onclick = () => {
        overlay.classList.add('hidden');
      };
    }
  });
</script>

  <script>
  // Particle Animation
  const canvas = document.getElementById('particleCanvas');
  const ctx = canvas.getContext('2d');

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }

  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);

  const particles = [];
  const particleCount = 50;

  class Particle {
  constructor() {
    this.reset();
  }

  reset() {
    this.x = Math.random() * canvas.width;
    this.y = Math.random() * canvas.height;
    this.size = Math.random() * 2 + 1;
    this.speedX = Math.random() * 0.5 - 0.25;
    this.speedY = Math.random() * 0.5 - 0.25;
    this.color = `rgba(255, ${Math.floor(Math.random() * 100 + 100)}, 255, ${Math.random() * 0.5 + 0.2})`;
  }

  update() {
    this.x += this.speedX;
    this.y += this.speedY;

    // Bounce off walls
    if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
    if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
  }

  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();
  }
}

  for (let i = 0; i < particleCount; i++) {
    particles.push(new Particle());
  }

  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    particles.forEach(particle => {
      particle.update();
      particle.draw();
    });
    requestAnimationFrame(animate);
  }

  animate();

  // Portal Entry Animation
  function enterPortal() {
    const portal = document.getElementById('portalEntry');
    const main = document.getElementById('mainContent');
    
    portal.style.transition = 'all 1s ease-in-out';
    portal.style.opacity = '0';
    portal.style.transform = 'scale(1.5)';
    
    setTimeout(() => {
      portal.style.display = 'none';
      main.classList.remove('hidden');
      main.style.opacity = '0';
      
      requestAnimationFrame(() => {
        main.style.transition = 'all 0.5s ease-out';
        main.style.opacity = '1';
      });
    }, 1000);
  }

</script>
</body>
</html>


  
  
  
