<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Y2K | Roast Records</title>

  <!-- SEO -->
  <meta name="description" content="Official Web3 submission portal for Y2K | Roast Records. Submit your glitch-dub-trap track and join the movement." />
  <meta name="theme-color" content="#0b0d12" />
  <link rel="icon" href="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/BD8E5D25-877A-427E-B1EA-C3FF422859C5.png" />

  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Space+Mono&display=swap" />

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

  <style>
    :root {
      --bg: #0b0d12;
      --txt: #f1f1f1;
      --accent: #00ffc3;
      --danger: #ff0044;
      --verified: #00ff88;
      --card: #13151a;
      --pink: #ff00aa;
    }
    * {margin:0;padding:0;box-sizing:border-box;}
    html,body {
      height:100%;width:100%;
      background:var(--bg);color:var(--txt);
      font-family:'Space Mono',monospace;
      overflow-x:hidden;
    }
    h1,h2,h3 {font-family:'Orbitron',sans-serif;text-transform:uppercase;}

    /* Canvas Background */
    #bgCanvas {
      position:fixed;top:0;left:0;width:100%;height:100%;
      z-index:-1;background:var(--bg);
    }

    header {
      position:sticky;top:0;z-index:1000;
      display:flex;align-items:center;justify-content:space-between;
      padding:1rem 1.5rem;background:rgba(11,13,18,0.85);
      backdrop-filter:blur(6px);border-bottom:1px solid #222;
    }
    .logo {font-size:1.4rem;font-weight:bold;
      text-shadow:0 0 3px var(--accent),0 0 10px var(--pink);}
    #connectBtn {
      background:var(--accent);color:#000;font-weight:bold;
      padding:0.5rem 1rem;border:none;border-radius:6px;
      cursor:pointer;transition:all 0.25s ease;
    }
    #connectBtn:hover {transform:scale(1.05);box-shadow:0 0 8px var(--accent);}
    #walletStatus {font-size:0.8rem;color:gray;text-align:right;}

    .container {max-width:1000px;margin:auto;padding:2rem 1rem;}
    .section {margin-top:3rem;}
    .glitchy {
      text-shadow:0 0 2px var(--accent),0 0 10px var(--pink);
      animation:glitch 2s infinite;
    }
    @keyframes glitch {
      0%,100%{text-shadow:0 0 2px var(--accent);}
      50%{text-shadow:0 0 8px var(--pink),0 0 12px var(--accent);}
    }

    .btn {padding:0.6rem 1.2rem;background:var(--accent);color:#000;
      border:none;border-radius:6px;font-weight:bold;cursor:pointer;}
    .card {
      background:var(--card);padding:1rem;border-radius:8px;
      box-shadow:0 0 8px rgba(0,255,195,0.2);
    }

    input,select,textarea {
      width:100%;padding:0.6rem;margin:0.5rem 0;
      background:#1a1c20;border:1px solid #333;border-radius:4px;color:var(--txt);
    }
    audio {width:100%;margin-top:0.5rem;border-radius:6px;}

    /* Socials + Buy */
    .socials,.buy {display:flex;gap:1rem;flex-wrap:wrap;margin-top:1rem;}
    .socials a,.buy a {
      text-decoration:none;color:var(--txt);
      border:1px solid var(--accent);border-radius:6px;
      padding:0.6rem 1.2rem;transition:0.2s;
    }
    .socials a:hover,.buy a:hover {
      background:var(--accent);color:#000;box-shadow:0 0 12px var(--accent);
    }

    /* Grid for Certified Tracks */
    #certifiedTracks {
      display:grid;gap:1.5rem;
      grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
    }
    #certifiedTracks .card {transition:transform 0.3s;}
    #certifiedTracks .card:hover {transform:translateY(-6px) scale(1.02);}

    /* FAQ */
    details {background:#1a1c20;margin:0.5rem 0;padding:0.5rem 1rem;border-radius:6px;}
    summary {cursor:pointer;font-weight:bold;}

    footer {
      text-align:center;padding:2rem 1rem;margin-top:4rem;
      border-top:1px solid #222;background:rgba(11,13,18,0.85);
    }
    footer img {height:50px;margin-bottom:0.5rem;}
    footer a {color:var(--accent);margin:0 0.5rem;text-decoration:none;}
    footer a:hover {text-shadow:0 0 6px var(--accent);}
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>

  <header>
    <div class="logo glitchy">üî• Y2K | Roast Records</div>
    <div>
      <button id="connectBtn" onclick="connectWallet()">Connect Wallet</button>
      <div id="walletStatus">Not connected</div>
    </div>
  </header>

  <!-- Hero Banner -->
  <section style="text-align:center;margin-top:2rem;">
    <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_7318.png"
         alt="Y2K Banner" style="max-width:100%;border-radius:10px;box-shadow:0 0 20px var(--accent);"/>
  </section>

  <div class="container">
    <!-- Socials -->
    <div class="section">
      <h2>üåê Follow Us</h2>
      <div class="socials">
        <a href="https://x.com/y2kc0in?s=21" target="_blank">ùïè (Twitter)</a>
        <a href="https://discord.gg/jpFbSapSAh" target="_blank">Discord</a>
      </div>
    </div>

    <!-- Buy -->
    <div class="section">
      <h2>üí∏ Where to Buy</h2>
      <div class="buy">
        <a href="https://obsidian.finance/?outputCurrency=0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" target="_blank">Buy on Obsidian</a>
        <a href="https://cronoscan.com/token/0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" target="_blank">View on Cronoscan</a>
      </div>
    </div>

    <!-- Submissions -->
    <div class="section">
      <h2>üì° Live Submissions</h2>
      <div id="liveSubmissions"></div>
    </div>

    <!-- Certified -->
    <div class="section">
      <h2>‚úÖ Certified Tracks</h2>
      <div id="certifiedTracks"></div>
    </div>

    <!-- Submit -->
    <div class="section">
      <h2>üé∂ Submit a Track</h2>
      <form id="submissionForm" onsubmit="submitTrack(event)">
        <input required placeholder="Track Title" id="trackName"/>
        <input required placeholder="Your X / Twitter @handle" id="handle"/>
        <select id="vibe">
          <option disabled selected>Select Vibe</option>
          <option>Glitch</option><option>Dub</option><option>Trap</option><option>Other</option>
        </select>
        <textarea id="notes" placeholder="Optional notes..."></textarea>
        <button class="btn" type="submit">Submit Track (30 CRO)</button>
      </form>
    </div>

    <!-- Admin -->
    <div id="adminPanel" class="section" style="display:none;">
      <h2>üõ†Ô∏è Admin Panel</h2>
      <input id="adminStampId" placeholder="Submission ID"/>
      <input id="ipfsAudio" placeholder="IPFS Audio URL"/>
      <input id="ipfsImage" placeholder="IPFS Cover Image URL"/>
      <button class="btn" onclick="certifyTrack()">Certify Track</button>
    </div>

    <!-- FAQ -->
    <div class="section">
      <h2>‚ùì FAQ</h2>
      <details><summary>How do I submit?</summary><p>Connect your wallet, fill details, and send 30 CRO. Admin reviews and certifies.</p></details>
      <details><summary>What happens after certification?</summary><p>Your track moves to Certified with art + audio preview.</p></details>
      <details><summary>Where are files stored?</summary><p>All files go to IPFS via Pinata, permanent + decentralized.</p></details>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/BD8E5D25-877A-427E-B1EA-C3FF422859C5.png" alt="Token"/>
    <p>&copy; 2025 Y2K | Roast Records</p>
    <div>
      <a href="https://x.com/y2kc0in?s=21" target="_blank">ùïè</a>|
      <a href="https://discord.gg/jpFbSapSAh" target="_blank">Discord</a>|
      <a href="https://obsidian.finance/?outputCurrency=0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" target="_blank">Buy</a>
    </div>
  </footer>

  <!-- Web3 + Firebase -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore-compat.js"></script>

  <script>
    // Firebase
    const treasuryWallet="0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100";
    const adminWallet="0x7fc2ab08f46c10489bab5d694d574022f1048198";
    let currentAccount;
    const firebaseConfig={apiKey:"AIzaSyByE3Z0Ui_aFr1JUgVzw3ZDatGv8DzqVcE",authDomain:"y2kroastrecords.firebaseapp.com",projectId:"y2kroastrecords",storageBucket:"y2kroastrecords.appspot.com",messagingSenderId:"313829428782",appId:"1:313829428782:web:4e42771ba525f6f297d9bf"};
    firebase.initializeApp(firebaseConfig);
    const db=firebase.firestore();

    async function connectWallet(){
      if(!window.ethereum) return alert("No wallet found");
      const provider=new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts",[]);
      const signer=provider.getSigner();const address=await signer.getAddress();
      await signer.signMessage("Sign to access Y2K Roast Records");
      currentAccount=address.toLowerCase();
      document.getElementById("walletStatus").innerText=`${currentAccount.slice(0,6)}...${currentAccount.slice(-4)}`;
      if(currentAccount===adminWallet){document.getElementById("adminPanel").style.display="block";}
    }

    async function submitTrack(e){
      e.preventDefault();if(!currentAccount)return alert("Connect wallet first");
      const provider=new ethers.providers.Web3Provider(window.ethereum);
      const signer=provider.getSigner();
      const tx=await signer.sendTransaction({to:treasuryWallet,value:ethers.utils.parseEther("30")});
      await tx.wait();
      const doc={track:trackName.value,handle:handle.value,vibe:vibe.value,notes:notes.value,wallet:currentAccount,timestamp:Date.now()};
      await db.collection("submissions").add(doc);
      alert("Track submitted!");submissionForm.reset();loadSubmissions();
    }

    async function certifyTrack(){
      const id=adminStampId.value,audio=ipfsAudio.value,image=ipfsImage.value;
      const ref=db.collection("submissions").doc(id),snap=await ref.get();
      if(!snap.exists)return alert("No submission found");const data=snap.data();
      await db.collection("certified").add({...data,audio,image,certifiedAt:Date.now()});
      await ref.delete();alert("Certified!");loadCertified();loadSubmissions();
    }

    async function loadSubmissions(){
      const subs=await db.collection("submissions").orderBy("timestamp","desc").get();
      liveSubmissions.innerHTML="";subs.forEach(doc=>{
        const d=doc.data();
        liveSubmissions.innerHTML+=`<div class="card"><b>${d.track}</b><br/><i>@${d.handle}</i><br/><small>${d.wallet.slice(0,6)}...${d.wallet.slice(-4)}</small><br/><small>${d.vibe}</small><br/><small>ID:${doc.id}</small></div>`;
      });
    }
    async function loadCertified(){
      const certs=await db.collection("certified").orderBy("certifiedAt","desc").get();
      certifiedTracks.innerHTML="";certs.forEach(doc=>{
        const d=doc.data();
        certifiedTracks.innerHTML+=`<div class="card"><b>${d.track} ‚úîÔ∏è</b><br/><i>@${d.handle}</i><br/><img src="https://ipfs.io/ipfs/${d.image}" alt="Cover"/><audio controls src="https://ipfs.io/ipfs/${d.audio}"></audio></div>`;
      });
    }
    loadSubmissions();loadCertified();

    // Canvas Background: glitch grid + waveform
    const canvas=document.getElementById("bgCanvas"),ctx=canvas.getContext("2d");
    let w,h;function resize(){w=canvas.width=window.innerWidth;h=canvas.height=window.innerHeight;}
    window.addEventListener("resize",resize);resize();
    let t=0;
    function draw(){
      ctx.fillStyle="rgba(11,13,18,0.6)";ctx.fillRect(0,0,w,h);
      ctx.strokeStyle="rgba(0,255,195,0.4)";ctx.lineWidth=1;
      for(let i=0;i<30;i++){
        ctx.beginPath();
        ctx.moveTo(0,h/2+i*20+Math.sin(t/20+i)*10);
        ctx.lineTo(w,h/2+i*20+Math.sin(t/20+i)*10);
        ctx.stroke();
      }
      ctx.strokeStyle="rgba(255,0,170,0.4)";
      ctx.beginPath();
      for(let x=0;x<w;x+=10){
        const y=h/2+Math.sin((x+t)/40)*60;
        ctx.lineTo(x,y);
      }
      ctx.stroke();t+=2;
      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
