<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Y2K Records ‚Äî AI Music for Web3</title>

  <link rel="icon" href="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/main/BD8E5D25-877A-427E-B1EA-C3FF422859C5.png" />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore-compat.js"></script>

  <style>
    body {
      margin: 0;
      font-family: 'Space Grotesk', sans-serif;
      background-color: #0b0d12;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }
    header {
      text-align: center;
      margin-bottom: 2rem;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }
    p {
      color: #aaa;
    }
    button, input, textarea {
      font-family: inherit;
    }
    .form-container {
      background: #111;
      padding: 2rem;
      border: 1px solid #333;
      border-radius: 12px;
      max-width: 500px;
      width: 100%;
      margin-bottom: 3rem;
    }
    label {
      display: block;
      margin-top: 1rem;
      font-weight: 600;
    }
    input, textarea {
      width: 100%;
      padding: 0.8rem;
      background: #222;
      color: #fff;
      border: 1px solid #444;
      border-radius: 8px;
      margin-top: 0.5rem;
    }
    button {
      margin-top: 1.5rem;
      padding: 0.9rem 1.5rem;
      background: #19c37d;
      color: #000;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }
    #connectBtn {
      margin-top: 1rem;
      background: #3f51b5;
      color: #fff;
    }
    iframe {
      border-radius: 16px;
      border: none;
      width: 100%;
      max-width: 600px;
      height: 400px;
      margin-top: 3rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Y2K Records</h1>
    <p>Custom AI-generated music for your Web3 project</p>
    <button id="connectBtn">Connect Wallet</button>
  </header>

  <div class="form-container">
    <form id="requestForm">
      <label>Project Name</label>
      <input type="text" id="project" required />

      <label>Describe the Vibe</label>
      <textarea id="vibe" rows="4" required></textarea>

      <label>Your ùïè Handle (so we can tag you)</label>
      <input type="text" id="twitter" placeholder="@yourhandle" required />

      <button type="submit">Submit ‚Äî 30 CRO</button>
    </form>
  </div>

  <iframe src="https://open.spotify.com/embed/playlist/0J86lmXD8OBCQdTnctFQNm?utm_source=generator" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture" loading="lazy"></iframe>

  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyDL3zWfSYDQfQ0da_ekkl5R6b5jE_uMC4g",
      authDomain: "y2k-arcade.firebaseapp.com",
      projectId: "y2k-arcade",
      storageBucket: "y2k-arcade.appspot.com",
      messagingSenderId: "474998263174",
      appId: "1:474998263174:web:ae37bbcdde96b93d6bb539"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let provider, signer, userAddress;

    document.getElementById('connectBtn').addEventListener('click', async () => {
      if (typeof window.ethereum !== 'undefined') {
        provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send('eth_requestAccounts', []);
        signer = provider.getSigner();
        userAddress = await signer.getAddress();
        document.getElementById('connectBtn').innerText = 'Connected: ' + userAddress.slice(0, 6) + '...' + userAddress.slice(-4);
      } else {
        alert('Please install MetaMask');
      }
    });

    document.getElementById('requestForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const project = document.getElementById('project').value.trim();
      const vibe = document.getElementById('vibe').value.trim();
      const twitter = document.getElementById('twitter').value.trim();

      if (!signer || !userAddress) return alert('Please connect your wallet first.');

      const tx = {
        to: '0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100',
        value: ethers.utils.parseUnits("30", "ether") // 30 CRO
      };

      try {
        await signer.sendTransaction(tx);
        await db.collection('songRequests').add({
          wallet: userAddress,
          project,
          vibe,
          twitter,
          timestamp: new Date().toISOString()
        });
        alert('Request submitted! We‚Äôll tag you when your track drops.');
        document.getElementById('requestForm').reset();
      } catch (err) {
        console.error(err);
        alert('Submission failed.');
      }
    });
  </script>
</body>
</html>
