<!-- index.html -->
<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Y2K | Roast Records</title>
  <meta name="description" content="The official site of Y2K | Roast Records â€” glitch-dub-trap music label on Cronos." />
  <meta name="theme-color" content="#0b0d12" />

  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Space+Mono&display=swap" rel="stylesheet" />
  <style>
    :root {
      --pink: #ff00aa;
      --dark: #0b0d12;
      --gray: #1a1a1a;
      --border: #444;
      --glow: 0 0 10px #ff00aa88;
      font-family: 'Orbitron', sans-serif;
    }
    body {
      margin: 0;
      background: var(--dark);
      color: white;
      font-family: 'Space Mono', monospace;
    }
    header {
      position: relative;
    }
    .banner {
      width: 100%;
      display: block;
    }
    .connect-button {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--pink);
      color: black;
      padding: 10px 16px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 14px;
      cursor: pointer;
      box-shadow: var(--glow);
      transition: transform 0.2s, box-shadow 0.3s;
      z-index: 99;
    }
    .connect-button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #ff00aa;
    }
    main {
      padding: 1rem;
    }
    details {
      background: #111;
      border: 1px solid var(--border);
      border-radius: 10px;
      margin-bottom: 1rem;
      padding: 1rem;
    }
    summary {
      font-weight: bold;
      font-size: 18px;
      cursor: pointer;
    }
    input, select, textarea, button {
      width: 100%;
      background: #000;
      color: #fff;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 10px;
      font-family: 'Space Mono', monospace;
      margin-bottom: 1rem;
    }
    button.submit {
      background: var(--pink);
      color: black;
      font-weight: bold;
      box-shadow: var(--glow);
      transition: 0.2s ease;
    }
    button.submit:hover {
      box-shadow: 0 0 15px #ff00aa;
      transform: scale(1.02);
    }
    footer {
      text-align: center;
      color: #888;
      padding: 2rem 0 1rem;
      font-size: 13px;
    }
  </style>
</head>
<body>

  <header>
    <img class="banner" src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_7318.png" alt="Y2K Banner" />
    <button id="connectWallet" class="connect-button">Connect Wallet</button>
  </header>

  <main>
    <details open>
      <summary>ðŸ”¥ Certified Tracks</summary>
      <div id="certifiedTracks"></div>
    </details>

    <details>
      <summary>ðŸŽ§ Live Submissions</summary>
      <div id="liveSubmissions"></div>
    </details>

    <details>
      <summary>ðŸŽ¤ Submit a Track</summary>
      <input type="text" id="trackTitle" placeholder="Track Title" />
      <input type="text" id="handle" placeholder="ð• Handle (optional)" />
      <select id="vibe">
        <option value="">Select vibe</option>
        <option>Glitch</option>
        <option>Dub</option>
        <option>Trap</option>
        <option>Cinematic</option>
        <option>Tribal</option>
      </select>
      <textarea id="idea" placeholder="Track idea (optional)"></textarea>
      <button class="submit" onclick="submitTrack()">Submit Track</button>
    </details>
  </main>

  <footer>
    y2kcoin.org
  </footer>

  <!-- Firebase + Wallet -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.3/firebase-auth-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyByE3Z0Ui_aFr1JUgVzw3ZDatGv8DzqVcE",
      authDomain: "y2kroastrecords.firebaseapp.com",
      projectId: "y2kroastrecords",
      storageBucket: "y2kroastrecords.appspot.com",
      messagingSenderId: "313829428782",
      appId: "1:313829428782:web:4e42771ba525f6f297d9bf"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let provider, signer, userAddress = null;

    async function connectWallet() {
      if (!window.ethereum) return alert("Please install MetaMask.");
      provider = new ethers.providers.Web3Provider(window.ethereum);
      await provider.send("eth_requestAccounts", []);
      signer = provider.getSigner();
      userAddress = await signer.getAddress();
      document.getElementById("connectWallet").innerText = userAddress.slice(0, 6) + "..." + userAddress.slice(-4);
    }

    document.getElementById("connectWallet").onclick = connectWallet;

    async function submitTrack() {
      if (!userAddress) return alert("Please connect your wallet.");
      const title = document.getElementById("trackTitle").value.trim();
      const handle = document.getElementById("handle").value.trim();
      const vibe = document.getElementById("vibe").value;
      const idea = document.getElementById("idea").value.trim();
      if (!title || !vibe) return alert("Track title and vibe are required.");
      await db.collection("tracks").add({
        title,
        handle,
        vibe,
        idea,
        address: userAddress,
        timestamp: Date.now(),
        verified: false
      });
      alert("ðŸ”¥ Track submitted!");
      document.getElementById("trackTitle").value = "";
      document.getElementById("handle").value = "";
      document.getElementById("vibe").value = "";
      document.getElementById("idea").value = "";
    }
  </script>

</body>
</html>
