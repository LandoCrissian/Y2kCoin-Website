<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <title>Y2K x ROAST | Portal</title>
  <meta name="description" content="The Y2K x ROAST cyberpunk hub. NFTs, roasting, and dual chain dominance.">

  <!-- Tailwind + Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rubik:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Web3 Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>

  <style>
    :root { color-scheme: dark; }
    html, body { background: #0a0a0a; color: #e2e8f0; font-family: 'Rubik', sans-serif; overflow-x: hidden; min-height: 100vh; }
    .neon-text { text-shadow: 0 0 5px #ff00ff, 0 0 10px #ff00ff, 0 0 20px #ff00ff; font-family: 'Orbitron', sans-serif; }
    .neon-border { border: 2px solid #ff00ff; box-shadow: 0 0 10px #ff00ff; border-radius: 8px; transition: 0.3s ease; }
    .neon-border:hover { box-shadow: 0 0 20px #ff00ff; }
    header { position: fixed; width: 100%; top: 0; background: rgba(0,0,0,0.8); z-index: 50; backdrop-filter: blur(8px); }
    header a { color: white; transition: color 0.3s ease; }
    header a:hover { color: #ff00ff; }
    .floating { animation: floaty 6s ease-in-out infinite; }
    @keyframes floaty { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-10px);} }
    .grain-overlay { pointer-events:none; position:fixed; width:100%; height:100%; background:url('https://upload.wikimedia.org/wikipedia/commons/8/89/Noise_texture.png'); opacity:0.08; z-index:1; animation:grainmove 8s steps(10) infinite; }
    @keyframes grainmove { 0%{background-position:0 0;}25%{background-position:50px 50px;}50%{background-position:0px 100px;}75%{background-position:-50px 50px;}100%{background-position:0 0;} }
    .cursor-glow { position:fixed; width:15px; height:15px; background:#ff00ff; border-radius:50%; pointer-events:none; opacity:0.6; z-index:9999; mix-blend-mode:overlay; transition:transform 0.05s ease; transform:translate(-50%,-50%); }
  </style>
</head>

<body>
<div id="app">

<!-- Grain + Cursor -->
<div class="grain-overlay"></div>
<div id="cursorGlow" class="cursor-glow hidden"></div>

<!-- Header -->
<header class="flex justify-between items-center p-4">
  <div class="flex items-center gap-4">
    <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5445.jpeg" class="w-10 h-10 neon-border rounded-full">
    <h1 class="text-xl neon-text font-bold">Y2K x ROAST</h1>
  </div>
  <nav class="flex gap-4 text-sm">
    <a href="#nfts">NFTs</a>
    <a href="#mint">Mint</a>
    <a href="#roasted">Roasted</a>
    <a href="#connect">Connect</a>
  </nav>
</header>

<!-- Spacer -->
<div class="h-20"></div>

<!-- Portal -->
<div id="enterOverlay" class="fixed inset-0 bg-black bg-opacity-90 flex flex-col justify-center items-center z-50">
  <h1 class="neon-text text-4xl font-bold mb-8 animate-pulse">Welcome to Y2K x ROAST</h1>
  <button onclick="enterPortal()" class="px-8 py-4 neon-border text-white font-bold text-xl hover:bg-pink-600">Enter Portal</button>
</div>

<!-- Main -->
<main id="portal" class="flex flex-col min-h-screen items-center bg-[#0a0a0a] text-center px-6">

  <!-- Hero -->
  <div class="flex flex-col justify-center items-center mt-10">
    <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5445.jpeg" class="w-32 h-32 neon-border rounded-full floating mb-6">
    <h2 class="neon-text text-4xl font-bold mb-4">Dual Chain Domination</h2>
    <p class="text-gray-400 max-w-lg mb-6">CRO meets SOL. Roasting the old world to build a new one.</p>
  </div>

  <!-- Trade Now Section -->
  <section class="py-12">
    <h2 class="neon-text text-3xl font-bold mb-8">Trade Now</h2>
    <div class="flex flex-col md:flex-row gap-6">
      <a href="https://obsidian.finance/?outputCurrency=0xB4Df7d2A736Cc391146bB0dF4277E8F68247Ac6d" target="_blank" class="px-8 py-4 neon-border text-white font-bold hover:bg-pink-600 rounded-lg">Swap $Y2K</a>
      <a href="https://raydium.io/launchpad/token/?mint=A6db9o4y5phC5ncSdM8pQKmWanodxLyXgwxuVCuA4ray" target="_blank" class="px-8 py-4 neon-border text-white font-bold hover:bg-pink-600 rounded-lg">Trade $ROAST</a>
    </div>
  </section>

  <!-- NFT Showcase -->
  <section id="nfts" class="py-16 w-full">
    <h2 class="neon-text text-4xl font-bold mb-10">Live NFT Drops</h2>
    <div class="flex overflow-x-auto gap-6 px-4">
      <!-- NFT cards -->
      <a href="https://eric-mode-business-boomin.nfts2.me/" target="_blank" class="min-w-[256px] neon-border rounded-xl p-2 hover:scale-105 transition">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5510.jpeg" class="rounded-xl mb-2">
        <div class="text-white font-bold">Eric Mode</div>
      </a>
      <a href="https://cronoshadow.nfts2.me/" target="_blank" class="min-w-[256px] neon-border rounded-xl p-2 hover:scale-105 transition">
        <img src="https://raw.githubusercontent.com/LandoCrissian/Y2kCoin-Website/refs/heads/main/IMG_5403.jpeg" class="rounded-xl mb-2">
        <div class="text-white font-bold">Cards of Cronos</div>
      </a>
    </div>
  </section>

  <!-- Mint & Roast Submission (Connect Wallet + Form) -->
  <section id="mint" class="py-16 flex flex-col items-center">
    <h2 class="neon-text text-3xl font-bold mb-8">Submit a Roast</h2>
    <div class="flex flex-col gap-6 max-w-md w-full">
      <button onclick="connectCRO()" class="wallet-button">Connect CRO Wallet</button>
      <button onclick="connectSOL()" class="wallet-button">Connect SOL Wallet</button>
      <form id="roastForm" class="flex flex-col gap-4 mt-8">
        <input id="targetName" placeholder="@TargetName" required class="neon-border p-3 text-white bg-black rounded text-center"/>
        <select id="tokenChoice" class="neon-border p-3 text-white bg-black rounded text-center">
          <option value="CRO">Submit with CRO (60)</option>
          <option value="SOL">Submit with SOL (0.032)</option>
        </select>
        <button type="button" onclick="handleSubmit()" class="neon-border p-4 font-bold text-xl text-white hover:bg-pink-600">Submit Roast</button>
      </form>
    </div>
  </section>

  <!-- Roasted Leaderboard -->
  <section id="roasted" class="py-16 bg-[#111] w-full flex flex-col items-center">
    <h2 class="neon-text text-4xl font-bold mb-6">ROASTED</h2>
    <div id="roastList" class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl w-full px-4"></div>
  </section>

</main>

<!-- Footer -->
<footer class="py-10 text-center text-gray-500 text-sm">
  Built by chaos. Fueled by CRO and SOL supremacy.
  <div class="flex justify-center gap-6 mt-4">
    <a href="https://discord.gg/XxtpYNXX4a" target="_blank" class="hover:text-pink-400">Discord</a>
    <a href="https://x.com/y2kc0in?s=21" target="_blank" class="hover:text-pink-400">ùïè</a>
  </div>
</footer>

</div>

  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCLGt0gVlI8BKdrpME4IefwVjF_ehJJmug",
  authDomain: "y2kroast-512ee.firebaseapp.com",
  projectId: "y2kroast-512ee",
  storageBucket: "y2kroast-512ee.appspot.com",
  messagingSenderId: "602588659855",
  appId: "1:602588659855:web:f01efa4b81e737d26270fa"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// --- Portal Enter Function ---
window.enterPortal = function () {
  const overlay = document.getElementById('enterOverlay');
  overlay.style.transition = "opacity 1s ease, transform 1s ease";
  overlay.style.opacity = 0;
  overlay.style.transform = "scale(1.1)";
  setTimeout(() => {
    overlay.remove();
  }, 1000);
};

// --- Enhanced Cursor Glow ---
const cursor = document.getElementById('cursorGlow');
if (matchMedia('(pointer:fine)').matches) {
  window.addEventListener('mousemove', e => {
    cursor.style.left = e.pageX + 'px';
    cursor.style.top = e.pageY + 'px';
    cursor.classList.remove('hidden');
  });
  window.addEventListener('mouseout', () => {
    cursor.classList.add('hidden');
  });
}

// --- Wallet Connect Settings ---
const CRONOS_MAINNET = {
  chainId: '0x19',
  chainName: 'Cronos Mainnet',
  nativeCurrency: { name: 'CRO', symbol: 'CRO', decimals: 18 },
  rpcUrls: ['https://evm.cronos.org'],
  blockExplorerUrls: ['https://cronoscan.com/']
};
const SOLANA_ENDPOINT = "https://thrilling-old-sailboat.solana-mainnet.quiknode.pro/7eeaf93b8ff0a17a6172d1a57f8bf43c81d164a0";

const CRO_RECIPIENT = "0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100";
const SOL_RECIPIENT = "HQcgVnNacvvjK4ToX8Pcq2bKmD5s32XR6AarQ2EVrrpq";
const CRO_AMOUNT = "60";
const SOL_AMOUNT = "0.032";

let croWallet = null;
let solWallet = null;
let solConnection = null;

function initializeSolana() {
  solConnection = new solanaWeb3.Connection(SOLANA_ENDPOINT);
}

function getSolanaWallet() {
  if (window.phantom?.solana) return window.phantom.solana;
  if (window.solflare?.solana) return window.solflare.solana;
  if (window.backpack?.solana) return window.backpack.solana;
  return null;
}

// --- Connect CRO ---
window.connectCRO = async function() {
  try {
    if (!window.ethereum) throw new Error('Install MetaMask or DeFi Wallet.');
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);

    await window.ethereum.request({
      method: 'wallet_switchEthereumChain',
      params: [{ chainId: CRONOS_MAINNET.chainId }],
    });

    croWallet = provider;
    const signer = provider.getSigner();
    const address = await signer.getAddress();
    const balance = await provider.getBalance(address);

    alert(`Connected CRO Wallet: ${address}\nBalance: ${ethers.utils.formatEther(balance).slice(0,6)} CRO`);
  } catch (error) {
    console.error('CRO Connect Error:', error);
    alert('CRO Connection Error: ' + error.message);
  }
};

// --- Connect SOL ---
window.connectSOL = async function() {
  try {
    if (!solConnection) initializeSolana();
    const wallet = getSolanaWallet();
    if (!wallet) throw new Error('Install Phantom, Solflare, or Backpack wallet.');

    await wallet.connect();
    solWallet = wallet;
    const balance = await solConnection.getBalance(wallet.publicKey);
    alert(`Connected SOL Wallet: ${wallet.publicKey.toString()}\nBalance: ${(balance/solanaWeb3.LAMPORTS_PER_SOL).toFixed(4)} SOL`);
  } catch (error) {
    console.error('SOL Connect Error:', error);
    alert('SOL Connection Error: ' + error.message);
  }
};

// --- Submit Roast ---
window.handleSubmit = async function() {
  const target = document.getElementById('targetName').value.trim();
  const token = document.getElementById('tokenChoice').value;
  if (!target.startsWith('@')) {
    alert('Enter a valid @target.');
    return;
  }

  try {
    let txHash;
    if (token === 'CRO') {
      const signer = croWallet.getSigner();
      const tx = await signer.sendTransaction({ to: CRO_RECIPIENT, value: ethers.utils.parseEther(CRO_AMOUNT) });
      txHash = tx.hash;
    } else {
      const transaction = new solanaWeb3.Transaction().add(
        solanaWeb3.SystemProgram.transfer({
          fromPubkey: solWallet.publicKey,
          toPubkey: new solanaWeb3.PublicKey(SOL_RECIPIENT),
          lamports: parseFloat(SOL_AMOUNT) * solanaWeb3.LAMPORTS_PER_SOL
        })
      );
      const { blockhash } = await solConnection.getLatestBlockhash();
      transaction.recentBlockhash = blockhash;
      transaction.feePayer = solWallet.publicKey;
      const signed = await solWallet.signTransaction(transaction);
      txHash = await solConnection.sendRawTransaction(signed.serialize());
      await solConnection.confirmTransaction(txHash);
    }

    await addDoc(collection(db, "roasts"), { target, chain: token, txHash, timestamp: Date.now(), likes: 0 });
    alert('Roast Submitted Successfully!');
    updateRoastList();

  } catch (error) {
    console.error('Submit Error:', error);
    alert('Roast Submit Error: ' + error.message);
  }
};

// --- Update Roast Board ---
async function updateRoastList() {
  const q = query(collection(db, "roasts"), orderBy("timestamp", "desc"));
  const snapshot = await getDocs(q);
  const list = document.getElementById('roastList');
  list.innerHTML = "";

  snapshot.forEach(doc => {
    const data = doc.data();
    list.innerHTML += `
      <div class="p-4 neon-border rounded space-y-2">
        <div class="font-bold text-xl">${data.target}</div>
        <div class="text-gray-400 text-sm">${data.chain} TX: ${data.txHash.slice(0,8)}...</div>
      </div>
    `;
  });
}

// --- Floating Prize Pool ---
function floatingPrizePool() {
  const bar = document.createElement('div');
  bar.innerHTML = `
    <div class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-pink-400 font-bold px-6 py-2 rounded-full shadow-lg z-50 text-sm">
      Prize Pool: <span id="liveCroPool">Loading...</span> CRO + <span id="liveSolPool">Loading...</span> SOL
    </div>`;
  document.body.appendChild(bar);
}

// --- Update Prize Pool ---
async function updateFloatingPrizePool() {
  try {
    const croProvider = new ethers.providers.JsonRpcProvider('https://evm.cronos.org');
    const croBalance = await croProvider.getBalance(CRO_RECIPIENT);
    document.getElementById('liveCroPool').textContent = parseFloat(ethers.utils.formatEther(croBalance)).toFixed(2);

    const solConn = new solanaWeb3.Connection(SOLANA_ENDPOINT);
    const solBalance = await solConn.getBalance(new solanaWeb3.PublicKey(SOL_RECIPIENT));
    document.getElementById('liveSolPool').textContent = (solBalance / solanaWeb3.LAMPORTS_PER_SOL).toFixed(3);
  } catch (err) {
    console.error('Prize Pool Fetch Error:', err);
  }
}

// --- Auto Init ---
window.addEventListener('load', () => {
  floatingPrizePool();
  updateFloatingPrizePool();
  updateRoastList();
  setInterval(updateFloatingPrizePool, 30000);
});
</script>

  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCLGt0gVlI8BKdrpME4IefwVjF_ehJJmug",
  authDomain: "y2kroast-512ee.firebaseapp.com",
  projectId: "y2kroast-512ee",
  storageBucket: "y2kroast-512ee.appspot.com",
  messagingSenderId: "602588659855",
  appId: "1:602588659855:web:f01efa4b81e737d26270fa"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// --- Portal Enter Function ---
window.enterPortal = function () {
  const overlay = document.getElementById('enterOverlay');
  overlay.style.transition = "opacity 1s ease, transform 1s ease";
  overlay.style.opacity = 0;
  overlay.style.transform = "scale(1.1)";
  setTimeout(() => {
    overlay.remove();
  }, 1000);
};

// --- Enhanced Cursor Glow ---
const cursor = document.getElementById('cursorGlow');
if (matchMedia('(pointer:fine)').matches) {
  window.addEventListener('mousemove', e => {
    cursor.style.left = e.pageX + 'px';
    cursor.style.top = e.pageY + 'px';
    cursor.classList.remove('hidden');
  });
  window.addEventListener('mouseout', () => {
    cursor.classList.add('hidden');
  });
}

// --- Wallet Connect Settings ---
const CRONOS_MAINNET = {
  chainId: '0x19',
  chainName: 'Cronos Mainnet',
  nativeCurrency: { name: 'CRO', symbol: 'CRO', decimals: 18 },
  rpcUrls: ['https://evm.cronos.org'],
  blockExplorerUrls: ['https://cronoscan.com/']
};
const SOLANA_ENDPOINT = "https://thrilling-old-sailboat.solana-mainnet.quiknode.pro/7eeaf93b8ff0a17a6172d1a57f8bf43c81d164a0";

const CRO_RECIPIENT = "0x99FD6Daaa57ebE7f10Ee94E6c1b7522Fa2b0d100";
const SOL_RECIPIENT = "HQcgVnNacvvjK4ToX8Pcq2bKmD5s32XR6AarQ2EVrrpq";
const CRO_AMOUNT = "60";
const SOL_AMOUNT = "0.032";

let croWallet = null;
let solWallet = null;
let solConnection = null;

function initializeSolana() {
  solConnection = new solanaWeb3.Connection(SOLANA_ENDPOINT);
}

function getSolanaWallet() {
  if (window.phantom?.solana) return window.phantom.solana;
  if (window.solflare?.solana) return window.solflare.solana;
  if (window.backpack?.solana) return window.backpack.solana;
  return null;
}

// --- Connect CRO ---
window.connectCRO = async function() {
  try {
    if (!window.ethereum) throw new Error('Install MetaMask or DeFi Wallet.');
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);

    await window.ethereum.request({
      method: 'wallet_switchEthereumChain',
      params: [{ chainId: CRONOS_MAINNET.chainId }],
    });

    croWallet = provider;
    const signer = provider.getSigner();
    const address = await signer.getAddress();
    const balance = await provider.getBalance(address);

    alert(`Connected CRO Wallet: ${address}\nBalance: ${ethers.utils.formatEther(balance).slice(0,6)} CRO`);
  } catch (error) {
    console.error('CRO Connect Error:', error);
    alert('CRO Connection Error: ' + error.message);
  }
};

// --- Connect SOL ---
window.connectSOL = async function() {
  try {
    if (!solConnection) initializeSolana();
    const wallet = getSolanaWallet();
    if (!wallet) throw new Error('Install Phantom, Solflare, or Backpack wallet.');

    await wallet.connect();
    solWallet = wallet;
    const balance = await solConnection.getBalance(wallet.publicKey);
    alert(`Connected SOL Wallet: ${wallet.publicKey.toString()}\nBalance: ${(balance/solanaWeb3.LAMPORTS_PER_SOL).toFixed(4)} SOL`);
  } catch (error) {
    console.error('SOL Connect Error:', error);
    alert('SOL Connection Error: ' + error.message);
  }
};

// --- Submit Roast ---
window.handleSubmit = async function() {
  const target = document.getElementById('targetName').value.trim();
  const token = document.getElementById('tokenChoice').value;
  if (!target.startsWith('@')) {
    alert('Enter a valid @target.');
    return;
  }

  try {
    let txHash;
    if (token === 'CRO') {
      const signer = croWallet.getSigner();
      const tx = await signer.sendTransaction({ to: CRO_RECIPIENT, value: ethers.utils.parseEther(CRO_AMOUNT) });
      txHash = tx.hash;
    } else {
      const transaction = new solanaWeb3.Transaction().add(
        solanaWeb3.SystemProgram.transfer({
          fromPubkey: solWallet.publicKey,
          toPubkey: new solanaWeb3.PublicKey(SOL_RECIPIENT),
          lamports: parseFloat(SOL_AMOUNT) * solanaWeb3.LAMPORTS_PER_SOL
        })
      );
      const { blockhash } = await solConnection.getLatestBlockhash();
      transaction.recentBlockhash = blockhash;
      transaction.feePayer = solWallet.publicKey;
      const signed = await solWallet.signTransaction(transaction);
      txHash = await solConnection.sendRawTransaction(signed.serialize());
      await solConnection.confirmTransaction(txHash);
    }

    await addDoc(collection(db, "roasts"), { target, chain: token, txHash, timestamp: Date.now(), likes: 0 });
    alert('Roast Submitted Successfully!');
    updateRoastList();

  } catch (error) {
    console.error('Submit Error:', error);
    alert('Roast Submit Error: ' + error.message);
  }
};

// --- Update Roast Board ---
async function updateRoastList() {
  const q = query(collection(db, "roasts"), orderBy("timestamp", "desc"));
  const snapshot = await getDocs(q);
  const list = document.getElementById('roastList');
  list.innerHTML = "";

  snapshot.forEach(doc => {
    const data = doc.data();
    list.innerHTML += `
      <div class="p-4 neon-border rounded space-y-2">
        <div class="font-bold text-xl">${data.target}</div>
        <div class="text-gray-400 text-sm">${data.chain} TX: ${data.txHash.slice(0,8)}...</div>
      </div>
    `;
  });
}

// --- Floating Prize Pool ---
function floatingPrizePool() {
  const bar = document.createElement('div');
  bar.innerHTML = `
    <div class="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-pink-400 font-bold px-6 py-2 rounded-full shadow-lg z-50 text-sm">
      Prize Pool: <span id="liveCroPool">Loading...</span> CRO + <span id="liveSolPool">Loading...</span> SOL
    </div>`;
  document.body.appendChild(bar);
}

// --- Update Prize Pool ---
async function updateFloatingPrizePool() {
  try {
    const croProvider = new ethers.providers.JsonRpcProvider('https://evm.cronos.org');
    const croBalance = await croProvider.getBalance(CRO_RECIPIENT);
    document.getElementById('liveCroPool').textContent = parseFloat(ethers.utils.formatEther(croBalance)).toFixed(2);

    const solConn = new solanaWeb3.Connection(SOLANA_ENDPOINT);
    const solBalance = await solConn.getBalance(new solanaWeb3.PublicKey(SOL_RECIPIENT));
    document.getElementById('liveSolPool').textContent = (solBalance / solanaWeb3.LAMPORTS_PER_SOL).toFixed(3);
  } catch (err) {
    console.error('Prize Pool Fetch Error:', err);
  }
}

// --- Auto Init ---
window.addEventListener('load', () => {
  floatingPrizePool();
  updateFloatingPrizePool();
  updateRoastList();
  setInterval(updateFloatingPrizePool, 30000);
});
</script>
</body>
</html>
